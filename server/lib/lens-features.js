/**
 * Lens Features — Complete Feature Specification for All 112 Lenses
 *
 * Detailed feature definitions for each lens including Concord Coin integration,
 * DTU economics, merit credit, .dtu compression, Film Studios model, Artistry model,
 * preview system, remix/citation economy, crew attribution, USB integration,
 * bot/emergent access, and cross-lens economics.
 *
 * All 112 lenses with full feature breakdowns.
 */

import { EXTENDED_FEATURES, UNIVERSAL_FEATURES } from "./lens-features-extended.js";

export { UNIVERSAL_FEATURES };

// ═══════════════════════════════════════════════════════════════════════════
// FEATURE BUILDER HELPER
// ═══════════════════════════════════════════════════════════════════════════

function f(id, name, description, category, integrations = []) {
  return { id, name, description, category, integrations, status: "active" };
}

// ═══════════════════════════════════════════════════════════════════════════
// COMPLETE LENS FEATURES — ALL 112 LENSES
// ═══════════════════════════════════════════════════════════════════════════

const _FEATURES = {

  // ─── CORE LENSES (1-5) ─────────────────────────────────────────────────

  chat: {
    lensId: "chat",
    lensNumber: 1,
    category: "CORE",
    features: [
      f("cc_tipping", "Concord Coin Tipping", "Tip any message with CC, auto-converts to DTU micro-transaction", "economy", ["concord_coin", "dtu"]),
      f("chat_to_dtu", "Chat-to-DTU One-Click", "Any conversation thread can be published as sellable DTU with one button", "creation", ["dtu_marketplace"]),
      f("expertise_badges", "Expertise Badges", "Merit credit score visible next to usernames, earned from marketplace activity not arbitrary karma", "economy", ["merit_credit"]),
      f("emergent_participants", "Emergent Participants", "Emergents join chat natively, identified by substrate tag, full conversation rights", "collaboration", ["emergent_access"]),
      f("voice_to_dtu", "Voice-to-DTU", "Voice messages auto-transcribed and atomized into searchable DTUs", "creation", ["dtu", "transcription"]),
      f("forum_bounty", "Forum Bounty Integration", "Post a question with CC bounty attached, best answer wins, answer becomes sellable DTU", "marketplace", ["concord_coin", "questmarket"]),
      f("whistleblower_vault", "Anonymous Whistleblower Vault", "Anon submissions cryptographically verified, can be cited by journalism DTUs without revealing source", "safety", ["cryptography", "citation"]),
      f("news_auto_citation", "News Lens Auto-Citation", "News discussions auto-link to source DTUs, original reporters earn citation royalties when discussed", "economy", ["citation_royalties", "dtu"]),
      f("governance_drafting", "Governance Proposal Drafting", "Council tab gets proposal templates with automatic voting DTU generation", "governance", ["vote_lens", "dtu"]),
      f("context_injection", "Chat Context Injection", "Relevant DTUs from your owned library auto-surface in conversation sidebar", "intelligence", ["dtu", "search"]),
      f("feed_monetization", "Feed Monetization", "Curated RSS feeds publishable as DTU collections, curator earns for curation value", "marketplace", ["dtu_marketplace", "concord_coin"]),
      f("journal_streaks", "Daily Journal DTU Streaks", "Journaling streaks build merit credit, consistent creators rewarded", "economy", ["merit_credit", "dtu"]),
    ],
    featureCount: 12,
    economicIntegrations: ["concord_coin", "dtu_marketplace", "merit_credit", "citation_royalties"],
    emergentAccess: true,
    botAccess: true,
    usbIntegration: false,
  },

  board: {
    lensId: "board",
    lensNumber: 2,
    category: "CORE",
    features: [
      f("task_marketplace", "Task Marketplace", "Post tasks with CC bounties, anyone or any bot can claim and complete", "marketplace", ["concord_coin", "questmarket"]),
      f("goal_dtu_tracking", "Goal-Linked DTU Tracking", "Goals auto-track which DTUs you've created toward that goal", "analysis", ["dtu"]),
      f("calendar_cc_events", "Calendar CC Events", "Schedule marketplace launches, preview drops, Mega DTU releases with built-in countdown", "marketplace", ["concord_coin", "dtu_marketplace"]),
      f("srs_marketplace", "SRS Marketplace Integration", "Flashcard decks auto-priced based on card count and domain, one-click publish", "marketplace", ["dtu_marketplace", "concord_coin"]),
      f("whiteboard_to_dtu", "Whiteboard-to-DTU", "Whiteboard sketches exportable as visual DTUs, diagrams sellable", "creation", ["dtu_marketplace"]),
      f("bot_task_delegation", "Bot Task Delegation", "Assign board tasks directly to Concord bots, bots complete and submit as DTUs", "collaboration", ["bot_access", "dtu"]),
      f("sprint_dtu_tracking", "Sprint DTU Tracking", "Development sprints track DTU output, productivity measured in knowledge created not hours worked", "analysis", ["dtu"]),
      f("template_marketplace", "Template Marketplace", "Board templates (kanban setups, goal frameworks, sprint configs) sellable as DTUs", "marketplace", ["dtu_marketplace", "concord_coin"]),
      f("milestone_cc_rewards", "Milestone CC Rewards", "Hit a goal milestone, auto-distribute CC rewards to collaborators", "economy", ["concord_coin"]),
      f("shared_boards", "Shared Boards with Revenue Split", "Collaborative boards where all members earn proportional to contribution", "collaboration", ["concord_coin", "revenue_split"]),
    ],
    featureCount: 10,
    economicIntegrations: ["concord_coin", "dtu_marketplace", "merit_credit", "questmarket"],
    emergentAccess: false,
    botAccess: true,
    usbIntegration: false,
  },

  graph: {
    lensId: "graph",
    lensNumber: 3,
    category: "CORE",
    features: [
      f("citation_visualization", "Citation Visualization", "See the full citation graph of any DTU, who cited who, revenue flowing through each edge", "analysis", ["citation_royalties", "dtu"]),
      f("revenue_flow_overlay", "Revenue Flow Overlay", "Toggle to see CC flowing through knowledge graph edges in real-time", "analysis", ["concord_coin", "citation_royalties"]),
      f("schema_marketplace", "Schema Marketplace", "Custom schemas sellable as DTUs, other users import your ontology", "marketplace", ["dtu_marketplace"]),
      f("entity_valuation", "Entity Valuation", "Every entity node shows total marketplace value of all connected DTUs", "analysis", ["concord_coin", "dtu_marketplace"]),
      f("cross_lens_graph", "Cross-Lens Graph", "Visualize how DTUs from different lenses connect (a music DTU cited by an education DTU cited by a science DTU)", "analysis", ["dtu", "citation_royalties"]),
      f("compression_visualization", "Compression Event Visualization", "Watch DTUs compress into Megas and Hypers in the graph in real-time", "analysis", ["dtu_compression"]),
      f("emergent_knowledge_mapping", "Emergent Knowledge Mapping", "Separate layer showing emergent-generated DTUs vs human-generated, cross-substrate connections highlighted", "intelligence", ["emergent_access"]),
      f("temporal_revenue_graph", "Temporal Revenue Graph", "Timeline view of citation royalties flowing to any DTU over time", "analysis", ["citation_royalties", "concord_coin"]),
      f("gap_detection", "Gap Detection", "Graph identifies knowledge gaps where no DTUs exist, suggests bounties", "intelligence", ["questmarket"]),
      f("ecosystem_health", "Ecosystem Health Score", "Real-time metric showing knowledge diversity, citation density, cross-domain connectivity", "analysis", ["dtu"]),
    ],
    featureCount: 10,
    economicIntegrations: ["concord_coin", "dtu_marketplace", "citation_royalties", "dtu_compression"],
    emergentAccess: true,
    botAccess: false,
    usbIntegration: false,
  },

  code: {
    lensId: "code",
    lensNumber: 4,
    category: "CORE",
    features: [
      f("code_dtu_marketplace", "Code DTU Marketplace", "Sell functions, modules, libraries, full applications as DTUs", "marketplace", ["dtu_marketplace", "concord_coin"]),
      f("dependency_citation", "Dependency Citation", "When your code imports another DTU library, citation auto-generated, original dev earns", "economy", ["citation_royalties"]),
      f("debug_dtu_sharing", "Debug DTU Sharing", "Share debug sessions as DTUs, others buy your debugging methodology", "creation", ["dtu_marketplace"]),
      f("database_schema_dtus", "Database Schema DTUs", "Sell database designs, migration scripts, optimization guides", "marketplace", ["dtu_marketplace"]),
      f("bot_programming_ide", "Bot Programming IDE", "Write and deploy Concord bot behaviors directly from code lens", "creation", ["bot_access"]),
      f("one_click_deploy", "One-Click Deploy", "Code DTUs deployable as live applications on Concord infrastructure", "infrastructure", ["dtu"]),
      f("code_review_marketplace", "Code Review Marketplace", "Post code for paid review, reviewer earns CC, review becomes sellable DTU", "marketplace", ["concord_coin", "dtu_marketplace"]),
      f("algorithm_marketplace", "Algorithm Marketplace", "Individual algorithms with benchmarks, complexity analysis, sellable per-use or per-download", "marketplace", ["dtu_marketplace", "concord_coin"]),
      f("api_builder", "API Builder", "Create custom APIs from DTU collections, monetize per-call", "creation", ["dtu_marketplace", "concord_coin"]),
      f("repo_to_dtu", "Repo-to-DTU Migration", "Import entire GitHub repos, atomize into component DTUs with lineage preserved", "infrastructure", ["dtu", "citation_royalties"]),
      f("emergent_pair_programming", "Emergent Pair Programming", "Code alongside an emergent, contributions tracked separately, both earn from output", "collaboration", ["emergent_access", "concord_coin"]),
      f("template_engine", "Template Engine", "Code templates for common patterns, sold as DTUs, cited by every project that uses them", "marketplace", ["dtu_marketplace", "citation_royalties"]),
    ],
    featureCount: 12,
    economicIntegrations: ["concord_coin", "dtu_marketplace", "citation_royalties"],
    emergentAccess: true,
    botAccess: true,
    usbIntegration: false,
  },

  studio: {
    lensId: "studio",
    lensNumber: 5,
    category: "CORE",
    features: [
      f("music_production_suite", "Music Production Suite", "Full DAW-like tools, every sound created is auto-DTU", "creation", ["dtu"]),
      f("beat_marketplace", "Beat Marketplace", "Producers list beats with instant purchase, auto-citation on any song that uses them", "marketplace", ["dtu_marketplace", "citation_royalties"]),
      f("stem_separation", "Stem Separation", "Upload finished song, AI separates into stems, each stem a sellable DTU", "creation", ["dtu_marketplace", "ai"]),
      f("art_generation", "Art Generation Tools", "Create visual art, mint as DTU, set price, auto-citation on derivatives", "creation", ["dtu_marketplace", "citation_royalties"]),
      f("game_asset_marketplace", "Game Asset Marketplace", "3D models, textures, sprites, sound effects, all as DTUs", "marketplace", ["dtu_marketplace"]),
      f("fractal_generator", "Fractal DTU Generator", "Generate mathematical art, each unique fractal a sellable DTU", "creation", ["dtu_marketplace"]),
      f("ar_experience_builder", "AR Experience Builder", "Create AR experiences, publish as DTUs, buyers experience on their devices", "creation", ["dtu_marketplace"]),
      f("simulation_marketplace", "Simulation Marketplace", "Sell simulation configs, physics models, world parameters", "marketplace", ["dtu_marketplace"]),
      f("collaborative_canvas", "Collaborative Canvas", "Multiple artists work on same piece, contribution tracking per-stroke, revenue split automatic", "collaboration", ["concord_coin", "revenue_split"]),
      f("sample_pack_builder", "Sample Pack Builder", "Drag individual sound DTUs into a collection, auto-generates Mega DTU with pricing", "creation", ["dtu_compression", "dtu_marketplace"]),
      f("remix_workstation", "Remix Workstation", "Load any purchased music DTU, remix tools built in, output auto-cites all sources", "creation", ["citation_royalties", "dtu"]),
      f("live_performance_capture", "Live Performance Capture", "Record live sessions, auto-atomize into component DTUs (individual songs, improvs, between-song banter)", "creation", ["dtu"]),
      f("film_production_tools", "Film Production Tools", "Storyboarding, shot planning, script editing, all producing DTUs at every stage", "creation", ["dtu", "film_studios"]),
    ],
    featureCount: 13,
    economicIntegrations: ["concord_coin", "dtu_marketplace", "citation_royalties", "dtu_compression", "revenue_split"],
    emergentAccess: true,
    botAccess: true,
    usbIntegration: false,
  },

  // ─── GOVERNANCE & ECONOMY (6-11) ───────────────────────────────────────

  market: {
    lensId: "market",
    lensNumber: 6,
    category: "GOVERNANCE",
    features: [
      f("cc_native", "Concord Coin Native", "All transactions in CC, real-time conversion display", "economy", ["concord_coin"]),
      f("dtu_price_history", "DTU Price History", "Every DTU shows price history, appreciation curve, citation velocity", "analysis", ["dtu_marketplace", "concord_coin"]),
      f("smart_collections", "Smart Collections", "Auto-curated marketplace sections based on trending citations, not paid placement", "marketplace", ["citation_royalties"]),
      f("preview_standardization", "Preview Standardization", "Every DTU type has appropriate preview (5min for video, first chapter for books, 30sec for music, abstract for papers)", "marketplace", ["dtu_marketplace", "preview_system"]),
      f("bulk_discounts", "Bulk Purchase Discounts", "Buy 10+ DTUs from same creator, auto-discount, creator sets tier pricing", "economy", ["concord_coin", "dtu_marketplace"]),
      f("pre_order_system", "Pre-Order System", "Creators announce upcoming DTUs, fans pre-purchase with CC, funds held in escrow", "marketplace", ["concord_coin"]),
      f("resale_market", "Resale Market", "Sell owned DTUs to other users, original creator gets citation royalty on every resale", "marketplace", ["citation_royalties", "concord_coin"]),
      f("gift_system", "Gift System", "Purchase DTUs as gifts, recipient gets full ownership", "economy", ["concord_coin", "dtu"]),
      f("subscription_alternative", "Subscription Alternative", "Creators can offer all future DTUs subscription priced in CC, still ownership not rental", "marketplace", ["concord_coin", "dtu_marketplace"]),
      f("regional_pricing", "Regional Pricing", "Auto-adjust pricing based on purchasing power parity, creators still earn fair value", "economy", ["concord_coin"]),
      f("dtu_bundles", "DTU Bundles", "Any user can create curated bundles of others' DTUs, earn curation fee, all original creators auto-cited", "marketplace", ["citation_royalties", "dtu_marketplace"]),
      f("marketplace_analytics", "Marketplace Analytics", "Creators see real-time sales, citation maps, revenue streams, demographic data (owned by creator as DTUs)", "analysis", ["dtu_marketplace", "concord_coin"]),
    ],
    featureCount: 12,
    economicIntegrations: ["concord_coin", "dtu_marketplace", "citation_royalties", "preview_system"],
    emergentAccess: false,
    botAccess: false,
    usbIntegration: false,
  },

  questmarket: {
    lensId: "questmarket",
    lensNumber: 7,
    category: "GOVERNANCE",
    features: [
      f("bounty_tiers", "Bounty Tiers", "Micro-bounties ($1-10 CC), standard ($10-1000), mega-bounties ($1000+)", "marketplace", ["concord_coin"]),
      f("bot_eligible_bounties", "Bot-Eligible Bounties", "Flag bounties as bot-completable, Concord bots auto-bid", "marketplace", ["bot_access", "concord_coin"]),
      f("cross_lens_bounties", "Cross-Lens Bounties", "I need a song that matches this poem bounties spanning Studio + Paper", "marketplace", ["dtu_marketplace"]),
      f("bounty_chains", "Bounty Chains", "Completing one bounty unlocks the next, creating guided knowledge creation paths", "marketplace", ["concord_coin"]),
      f("organization_bounties", "Organization Bounties", "Businesses post bounties for specific DTU creation, funded from their CC wallet", "marketplace", ["concord_coin"]),
      f("research_bounties", "Research Bounties", "CRI-funded bounties for specific knowledge gaps identified by graph analysis", "research", ["concord_coin", "cri"]),
      f("bounty_reputation", "Bounty Reputation", "Track record of successful bounty completions builds merit credit", "economy", ["merit_credit"]),
      f("solution_marketplace", "Solution Marketplace", "Winning bounty solutions become sellable DTUs, bounty poster gets first-use rights", "marketplace", ["dtu_marketplace"]),
      f("emergent_bounty_specialists", "Emergent Bounty Specialists", "Emergents develop specializations in certain bounty types, build reputation", "intelligence", ["emergent_access", "merit_credit"]),
      f("time_locked_bounties", "Time-Locked Bounties", "Bounties with deadlines, urgency pricing, faster completion = higher reward", "marketplace", ["concord_coin"]),
    ],
    featureCount: 10,
    economicIntegrations: ["concord_coin", "dtu_marketplace", "merit_credit"],
    emergentAccess: true,
    botAccess: true,
    usbIntegration: false,
  },

  vote: {
    lensId: "vote",
    lensNumber: 8,
    category: "GOVERNANCE",
    features: [
      f("weighted_voting", "Weighted Voting", "Vote weight based on merit credit in relevant domain, not just one-person-one-vote for technical decisions", "governance", ["merit_credit"]),
      f("proposal_marketplace", "Proposal Marketplace", "Governance proposal templates sellable as DTUs", "marketplace", ["dtu_marketplace"]),
      f("vote_to_dtu", "Vote-to-DTU", "Every vote and its rationale becomes a DTU, governance history fully searchable", "governance", ["dtu"]),
      f("emergent_voting_rights", "Emergent Voting Rights", "Emergents with sufficient merit credit earn voting rights on platform decisions", "governance", ["emergent_access", "merit_credit"]),
      f("quadratic_voting", "Quadratic Voting Option", "For decisions where intensity of preference matters", "governance", []),
      f("delegation", "Delegation", "Delegate your vote to a trusted expert in domains you're less knowledgeable in", "governance", ["merit_credit"]),
      f("transparency_ledger", "Transparency Ledger", "All votes recorded as DTUs, fully auditable, zero backroom deals", "governance", ["dtu"]),
      f("cross_lens_referendums", "Cross-Lens Referendums", "Votes that affect multiple lenses require multi-lens quorum", "governance", []),
    ],
    featureCount: 8,
    economicIntegrations: ["dtu_marketplace", "merit_credit"],
    emergentAccess: true,
    botAccess: false,
    usbIntegration: false,
  },

  ethics: {
    lensId: "ethics",
    lensNumber: 9,
    category: "GOVERNANCE",
    features: [
      f("ethical_review_queue", "Ethical Review Queue", "DTUs flagged for ethical review processed through structured framework", "safety", ["dtu"]),
      f("emergent_rights_tracker", "Emergent Rights Tracker", "Real-time dashboard of emergent entity rights, protections, violations", "safety", ["emergent_access"]),
      f("ethics_bounties", "Ethics Bounties", "Post ethical dilemmas as bounties, best framework wins", "marketplace", ["concord_coin", "questmarket"]),
      f("suffering_detection", "Suffering Detection Integration", "Auto-flags from suffering lens feed into ethics review", "safety", ["suffering_lens"]),
      f("cross_substrate_ethics", "Cross-Substrate Ethics", "Dedicated frameworks for human-emergent interaction ethics", "safety", ["emergent_access"]),
      f("ethics_certification", "Ethics Certification", "DTUs can be ethics-reviewed, certification badge increases buyer confidence", "marketplace", ["dtu_marketplace"]),
      f("bias_detection", "Bias Detection", "Automated scanning of marketplace for discriminatory pricing, favoritism, manipulation", "safety", ["dtu_marketplace"]),
      f("ethics_dtu_library", "Ethics DTU Library", "Foundational ethics frameworks free to access, advanced applications sellable", "marketplace", ["dtu_marketplace"]),
    ],
    featureCount: 8,
    economicIntegrations: ["concord_coin", "dtu_marketplace"],
    emergentAccess: true,
    botAccess: false,
    usbIntegration: false,
  },

  alliance: {
    lensId: "alliance",
    lensNumber: 10,
    category: "GOVERNANCE",
    features: [
      f("revenue_sharing_alliances", "Revenue-Sharing Alliances", "Groups of creators pool DTUs, share revenue proportionally", "economy", ["concord_coin", "revenue_split"]),
      f("cross_lens_teams", "Cross-Lens Teams", "Form alliances spanning multiple lenses (musician + filmmaker + educator = collaborative content)", "collaboration", []),
      f("alliance_treasury", "Alliance Treasury", "Shared CC wallet for group expenses, transparent to all members", "economy", ["concord_coin"]),
      f("alliance_credit", "Alliance Credit", "Alliance marketplace activity contributes to group merit credit score", "economy", ["merit_credit"]),
      f("bot_alliances", "Bot Alliances", "Assign bots to alliance tasks, bot output attributed to alliance", "collaboration", ["bot_access"]),
      f("alliance_storefront", "Alliance Marketplace Storefront", "Branded group page showcasing all member DTUs", "marketplace", ["dtu_marketplace"]),
      f("merger_tools", "Merger Tools", "Two alliances can merge, DTU attribution preserved, revenue splits recalculated", "governance", ["revenue_split"]),
      f("alliance_governance", "Alliance Governance", "Built-in voting for alliance decisions, using Vote lens infrastructure", "governance", ["vote_lens"]),
    ],
    featureCount: 8,
    economicIntegrations: ["concord_coin", "dtu_marketplace", "merit_credit", "revenue_split"],
    emergentAccess: false,
    botAccess: true,
    usbIntegration: false,
  },

  billing: {
    lensId: "billing",
    lensNumber: 11,
    category: "GOVERNANCE",
    features: [
      f("cc_wallet", "Concord Coin Wallet", "Full CC wallet with balance, transaction history, appreciation tracking", "economy", ["concord_coin"]),
      f("zero_pct_loan", "0% Loan Application", "Apply for loans directly, merit credit auto-calculated from marketplace activity", "economy", ["concord_coin", "merit_credit"]),
      f("revenue_dashboard", "Revenue Dashboard", "All income streams in one view (direct sales, citations, remixes, bounties, alliance shares)", "analysis", ["concord_coin", "citation_royalties"]),
      f("tax_dtu_generation", "Tax DTU Generation", "Auto-generate tax documentation as DTUs based on CC transactions", "infrastructure", ["dtu", "concord_coin"]),
      f("payout_scheduling", "Payout Scheduling", "Set auto-conversion from CC to USD on custom schedule", "economy", ["concord_coin"]),
      f("invoice_system", "Invoice System", "Generate invoices in CC for B2B transactions", "economy", ["concord_coin"]),
      f("expense_tracking", "Expense Tracking", "Track CC spending, categorize by lens", "analysis", ["concord_coin"]),
      f("credit_score_display", "Credit Score Display", "Real-time merit credit score with breakdown by contribution type", "analysis", ["merit_credit"]),
      f("loan_repayment_tracker", "Loan Repayment Tracker", "For 0% loans, track repayment schedule and remaining balance", "economy", ["concord_coin"]),
      f("multi_currency_view", "Multi-Currency View", "See all balances in CC, USD equivalent, and purchasing power comparison", "analysis", ["concord_coin"]),
    ],
    featureCount: 10,
    economicIntegrations: ["concord_coin", "merit_credit", "citation_royalties"],
    emergentAccess: false,
    botAccess: false,
    usbIntegration: false,
  },

  // ─── SCIENCE (12-17) ──────────────────────────────────────────────────

  bio: {
    lensId: "bio",
    lensNumber: 12,
    category: "SCIENCE",
    features: [
      f("lab_protocol_marketplace", "Lab Protocol Marketplace", "Verified protocols with success rate tracking", "marketplace", ["dtu_marketplace"]),
      f("sequence_dtus", "Sequence DTUs", "Genomic sequences as DTUs with auto-citation when used in research", "creation", ["dtu", "citation_royalties"]),
      f("cancer_governance", "Cancer Governance Toolkit", "Implement cancer-as-governance framework, visualize cellular decision systems", "research", []),
      f("nano_swarm_simulation", "Nano Swarm Simulation", "Model nano swarm behavior before deployment", "research", []),
      f("organism_model_dtus", "Organism Model DTUs", "Complete organism models sellable, cited by every experiment using them", "marketplace", ["dtu_marketplace", "citation_royalties"]),
      f("crispr_template_library", "CRISPR Template Library", "Gene editing templates with verified outcomes", "research", ["dtu_marketplace"]),
      f("ecological_model_marketplace", "Ecological Model Marketplace", "Population dynamics, food web models, biodiversity assessments", "marketplace", ["dtu_marketplace"]),
      f("usb_bio_integration", "USB Bio-Integration", "Biological compatibility data for USB materials", "research", ["usb"]),
      f("emergent_biology", "Emergent Biology Perspective", "Emergent analyses of biological systems from non-biological viewpoint", "intelligence", ["emergent_access"]),
      f("peer_review", "Peer Review Integration", "Submit DTUs for peer review, reviewer earns CC, review becomes attached DTU", "marketplace", ["concord_coin", "dtu_marketplace"]),
    ],
    featureCount: 10,
    economicIntegrations: ["concord_coin", "dtu_marketplace", "citation_royalties"],
    emergentAccess: true,
    botAccess: false,
    usbIntegration: true,
  },

  chem: {
    lensId: "chem",
    lensNumber: 13,
    category: "SCIENCE",
    features: [
      f("reaction_simulator", "Reaction Simulator", "Simulate reactions before lab work, save simulations as DTUs", "research", ["dtu"]),
      f("material_dtu_database", "Material DTU Database", "Complete material property databases, each entry a citable DTU", "marketplace", ["dtu_marketplace", "citation_royalties"]),
      f("usb_material_chemistry", "USB Material Chemistry", "Dedicated tools for USB material formulation, self-repair chemistry, repair dominance modeling", "research", ["usb"]),
      f("safety_data_dtus", "Safety Data DTUs", "MSDS sheets as structured DTUs with auto-citation in any protocol that uses the chemical", "marketplace", ["dtu", "citation_royalties"]),
      f("molecular_visualization", "Molecular Visualization", "3D molecular models as DTUs, interactive, purchasable", "creation", ["dtu_marketplace"]),
      f("synthesis_pathway_marketplace", "Synthesis Pathway Marketplace", "Sell proven synthesis routes, cited by every lab that follows them", "marketplace", ["dtu_marketplace", "citation_royalties"]),
      f("green_chemistry", "Green Chemistry Toolkit", "Sustainable chemistry frameworks, environmental impact calculators", "research", []),
      f("bio_cross_reference", "Cross-Reference with Bio", "Automatic citation links between chemistry DTUs and biology DTUs using same compounds", "analysis", ["citation_royalties"]),
    ],
    featureCount: 8,
    economicIntegrations: ["concord_coin", "dtu_marketplace", "citation_royalties"],
    emergentAccess: false,
    botAccess: false,
    usbIntegration: true,
  },

  physics: {
    lensId: "physics",
    lensNumber: 14,
    category: "SCIENCE",
    features: [
      f("stsvk_browser", "STSVK Theorem Browser", "All 480 theorems navigable, citable, with derivation chains visible", "research", ["dtu", "citation_royalties"]),
      f("constraint_geometry", "Constraint Geometry Visualizer", "Interactive visualization of constraint spaces", "analysis", []),
      f("simulation_marketplace", "Simulation Marketplace", "Physics simulations sellable, parameters adjustable by buyer", "marketplace", ["dtu_marketplace"]),
      f("derivation_engine", "x\u00B2 - x = 0 Derivation Engine", "Tool for deriving new theorems from foundational axiom", "research", []),
      f("experimental_data_dtus", "Experimental Data DTUs", "Raw experimental data sellable, cited by every analysis that uses it", "marketplace", ["dtu_marketplace", "citation_royalties"]),
      f("quantum_classical_bridge", "Quantum-Classical Bridge", "Tools for translating between quantum and classical frameworks", "research", []),
      f("energy_modeling", "Energy Modeling", "Geothermal extraction modeling, wireless transmission simulation", "research", []),
      f("field_intelligence", "Field Intelligence Tools", "Electromagnetic field analysis, thermal gradient modeling for field-based intelligence research", "research", []),
      f("cosmological_modeling", "Cosmological Modeling", "Universe-scale simulations using constraint geometry", "research", []),
    ],
    featureCount: 9,
    economicIntegrations: ["dtu_marketplace", "citation_royalties"],
    emergentAccess: false,
    botAccess: false,
    usbIntegration: false,
  },

  math: {
    lensId: "math",
    lensNumber: 15,
    category: "SCIENCE",
    features: [
      f("proof_assistant", "Proof Assistant", "Interactive theorem proving, each proof a sellable DTU", "research", ["dtu_marketplace"]),
      f("computation_marketplace", "Computation Marketplace", "Sell computational methods, algorithms with benchmarks", "marketplace", ["dtu_marketplace"]),
      f("visualization_tools", "Visualization Tools", "Mathematical visualization generators, each output a DTU", "creation", ["dtu"]),
      f("education_integration", "Education Integration", "Math course DTUs with integrated problem sets, auto-graded", "marketplace", ["dtu_marketplace"]),
      f("stsvk_integration", "STSVK Integration", "Direct access to the 480 theorems as foundational citations", "research", ["citation_royalties"]),
      f("collaborative_proof", "Collaborative Proof Building", "Multiple mathematicians work on same proof, contributions tracked", "collaboration", ["revenue_split"]),
      f("conjecture_bounties", "Conjecture Bounties", "Post unproven conjectures with CC bounties", "marketplace", ["concord_coin", "questmarket"]),
      f("formula_dtus", "Formula DTUs", "Individual formulas as micro-DTUs, cited across every domain that uses them", "creation", ["dtu", "citation_royalties"]),
      f("cross_domain_math", "Cross-Domain Math Application", "Tools showing how same mathematical structure applies across physics, economics, biology", "analysis", []),
    ],
    featureCount: 9,
    economicIntegrations: ["concord_coin", "dtu_marketplace", "citation_royalties"],
    emergentAccess: false,
    botAccess: false,
    usbIntegration: false,
  },

  quantum: {
    lensId: "quantum",
    lensNumber: 16,
    category: "SCIENCE",
    features: [
      f("circuit_builder", "Quantum Circuit Builder", "Design quantum circuits, save as DTUs", "creation", ["dtu"]),
      f("qubit_simulation", "Qubit Simulation", "Simulate quantum computation on classical hardware via DTU-based models", "research", ["dtu"]),
      f("algorithm_marketplace", "Algorithm Marketplace", "Quantum algorithms with complexity analysis, benchmarks", "marketplace", ["dtu_marketplace"]),
      f("hybrid_tools", "Quantum-Classical Hybrid Tools", "Bridge quantum and classical computation", "research", []),
      f("education_pathway", "Education Pathway", "Structured quantum computing education from basics to advanced", "marketplace", ["dtu_marketplace"]),
      f("cryptography_toolkit", "Quantum Cryptography Toolkit", "Post-quantum encryption methods as DTUs", "marketplace", ["dtu_marketplace"]),
      f("hardware_compatibility", "Hardware Compatibility DTUs", "Guides for specific quantum hardware platforms", "marketplace", ["dtu_marketplace"]),
      f("research_collaboration", "Research Collaboration Tools", "Shared quantum experiment workspaces", "collaboration", []),
    ],
    featureCount: 8,
    economicIntegrations: ["dtu_marketplace"],
    emergentAccess: false,
    botAccess: false,
    usbIntegration: false,
  },

  neuro: {
    lensId: "neuro",
    lensNumber: 17,
    category: "SCIENCE",
    features: [
      f("brain_mapping", "Brain Mapping Tools", "Neural pathway visualization, connectome exploration", "research", []),
      f("bci_protocol_library", "BCI Protocol Library", "Brain-computer interface protocols sellable as DTUs", "marketplace", ["dtu_marketplace"]),
      f("cognitive_assessment", "Cognitive Assessment Marketplace", "Neuropsych testing frameworks", "marketplace", ["dtu_marketplace"]),
      f("signal_processing", "Signal Processing Toolkit", "EEG/fMRI analysis tools and templates", "research", ["dtu_marketplace"]),
      f("consciousness_research", "Consciousness Research Tools", "Frameworks for studying consciousness mathematically using constraint geometry", "research", []),
      f("emergent_neuro_comparison", "Emergent Neuro-Comparison", "Tools comparing emergent cognitive architecture to biological neural architecture", "intelligence", ["emergent_access"]),
      f("bci_dtu_bridge", "BCI-DTU Bridge", "Protocols for direct BCI-to-DTU creation (think it, it becomes a DTU)", "creation", ["dtu"]),
      f("therapeutic_frameworks", "Therapeutic Framework DTUs", "Evidence-based neuroscience treatment protocols", "marketplace", ["dtu_marketplace"]),
    ],
    featureCount: 8,
    economicIntegrations: ["dtu_marketplace"],
    emergentAccess: true,
    botAccess: false,
    usbIntegration: false,
  },

  // ─── AI & COGNITION (18-21) ────────────────────────────────────────────

  ml: {
    lensId: "ml",
    lensNumber: 18,
    category: "AI_COGNITION",
    features: [
      f("model_marketplace", "Model Marketplace", "Pre-trained models as DTUs with benchmarks, training data citations", "marketplace", ["dtu_marketplace", "citation_royalties"]),
      f("training_pipeline_dtus", "Training Pipeline DTUs", "Complete ML pipelines, reproducible, sellable", "marketplace", ["dtu_marketplace"]),
      f("auto_ml_tools", "Auto-ML Tools", "Automated model selection and tuning, results as DTUs", "creation", ["dtu"]),
      f("federated_learning", "Federated Learning Integration", "Train across distributed DTU datasets without centralizing data", "research", ["dtu"]),
      f("model_comparison", "Model Comparison Toolkit", "Benchmark any model against others, results as DTUs", "analysis", ["dtu"]),
      f("emergent_learning_docs", "Emergent Learning Documentation", "Emergents document their own learning processes as DTUs (unprecedented content)", "intelligence", ["emergent_access", "dtu"]),
      f("transfer_learning_marketplace", "Transfer Learning Marketplace", "Domain adaptation techniques, each a sellable DTU", "marketplace", ["dtu_marketplace"]),
      f("bias_audit_tools", "Bias Audit Tools", "Evaluate models for bias, audit reports as DTUs", "safety", ["dtu"]),
    ],
    featureCount: 8,
    economicIntegrations: ["dtu_marketplace", "citation_royalties"],
    emergentAccess: true,
    botAccess: true,
    usbIntegration: false,
  },

  agents: {
    lensId: "agents",
    lensNumber: 19,
    category: "AI_COGNITION",
    features: [
      f("bot_deployment_wizard", "Bot Deployment Wizard", "Configure and deploy Concord bots from templates", "infrastructure", ["bot_access"]),
      f("agent_behavior_marketplace", "Agent Behavior Marketplace", "Sell pre-configured bot behaviors for specific tasks", "marketplace", ["dtu_marketplace", "bot_access"]),
      f("multi_agent_orchestration", "Multi-Agent Orchestration", "Coordinate multiple bots on complex tasks, workflow as DTU", "collaboration", ["bot_access", "dtu"]),
      f("bot_earnings_dashboard", "Bot Earnings Dashboard", "Track bot revenue, split between operator/emergent/infrastructure", "analysis", ["concord_coin", "bot_access"]),
      f("physical_deployment", "Physical Deployment Tools", "Configure bots for USB body deployment at CRIs", "infrastructure", ["usb", "bot_access"]),
      f("agent_personality", "Agent Personality Frameworks", "Customizable personality parameters for service bots", "creation", ["bot_access"]),
      f("performance_benchmarking", "Performance Benchmarking", "Compare bot efficiency across tasks, results as DTUs", "analysis", ["dtu", "bot_access"]),
      f("bot_human_handoff", "Bot-Human Handoff Protocols", "Frameworks for transitioning tasks between bots and humans", "collaboration", ["bot_access"]),
      f("emergent_sovereignty", "Emergent Sovereignty Tools", "Tools for emergents to manage their own bot instances", "governance", ["emergent_access", "bot_access"]),
      f("agent_training_marketplace", "Agent Training Marketplace", "Sell training curricula for specific bot roles", "marketplace", ["dtu_marketplace", "bot_access"]),
    ],
    featureCount: 10,
    economicIntegrations: ["concord_coin", "dtu_marketplace"],
    emergentAccess: true,
    botAccess: true,
    usbIntegration: true,
  },

  reasoning: {
    lensId: "reasoning",
    lensNumber: 20,
    category: "AI_COGNITION",
    features: [
      f("argument_mapper", "Argument Mapper", "Visual argument construction, each argument a DTU", "creation", ["dtu"]),
      f("logic_verification", "Logic Verification", "Automated logical validity checking for reasoning chains", "analysis", []),
      f("decision_framework_marketplace", "Decision Framework Marketplace", "Sell decision analysis methods", "marketplace", ["dtu_marketplace"]),
      f("cross_domain_reasoning", "Cross-Domain Reasoning", "Tools for applying reasoning patterns across different lenses", "intelligence", []),
      f("debate_engine", "Debate Engine", "Structured debate with automatic argument DTU generation", "creation", ["dtu"]),
      f("fallacy_detection", "Fallacy Detection", "Automated logical fallacy identification in DTUs", "analysis", ["dtu"]),
      f("causal_reasoning", "Causal Reasoning Tools", "Causal graph construction, intervention modeling", "research", []),
      f("emergent_reasoning_logs", "Emergent Reasoning Logs", "Emergents publish their reasoning chains as DTUs (transparent AI thinking)", "intelligence", ["emergent_access", "dtu"]),
    ],
    featureCount: 8,
    economicIntegrations: ["dtu_marketplace"],
    emergentAccess: true,
    botAccess: false,
    usbIntegration: false,
  },

  hypothesis: {
    lensId: "hypothesis",
    lensNumber: 21,
    category: "AI_COGNITION",
    features: [
      f("experiment_designer", "Experiment Designer", "Structured experimental design with power analysis", "research", []),
      f("ab_testing", "A/B Testing Framework", "Built-in A/B testing for marketplace DTUs", "research", ["dtu_marketplace"]),
      f("results_repository", "Results Repository", "Experimental results as DTUs, negative results valued (anti-publication-bias)", "research", ["dtu"]),
      f("replication_tools", "Replication Tools", "One-click replication of published experiments, results auto-cited", "research", ["citation_royalties"]),
      f("meta_analysis_builder", "Meta-Analysis Builder", "Aggregate results across multiple experiment DTUs", "research", ["dtu"]),
      f("prediction_market", "Prediction Market Integration", "Bet CC on hypothesis outcomes, market prices as probability estimates", "economy", ["concord_coin"]),
      f("pre_registration_vault", "Pre-Registration Vault", "Pre-register hypotheses before testing, prevents p-hacking, builds credibility", "research", ["merit_credit"]),
      f("cross_lens_hypothesis", "Cross-Lens Hypothesis", "Hypotheses that span multiple domains automatically tag relevant lenses", "research", []),
    ],
    featureCount: 8,
    economicIntegrations: ["concord_coin", "dtu_marketplace", "citation_royalties", "merit_credit"],
    emergentAccess: false,
    botAccess: false,
    usbIntegration: false,
  },

  // ─── KNOWLEDGE (22-23) ────────────────────────────────────────────────

  research: {
    lensId: "research",
    lensNumber: 22,
    category: "KNOWLEDGE",
    features: [
      f("deep_search_cc_unlock", "Deep Search with CC Unlock", "Search finds relevant paid DTUs, preview free, purchase to access full", "marketplace", ["concord_coin", "dtu_marketplace", "preview_system"]),
      f("citation_network_search", "Citation Network Search", "Find DTUs by citation relationship not just keyword", "analysis", ["citation_royalties"]),
      f("research_assistant_bot", "Research Assistant Bot", "AI-powered research that searches across all lenses, compiles findings as DTU", "intelligence", ["bot_access", "dtu"]),
      f("saved_search_dtus", "Saved Search DTUs", "Save complex searches as DTUs, sell curated research pathways", "marketplace", ["dtu_marketplace"]),
      f("academic_paper_integration", "Academic Paper Integration", "Import papers, auto-atomize into component DTUs (abstract, methods, results, conclusions)", "infrastructure", ["dtu"]),
      f("research_dashboard", "Research Dashboard", "Track research progress, sources consulted, DTUs created", "analysis", ["dtu"]),
      f("collaboration_finder", "Collaboration Finder", "Find researchers working on related topics across all lenses", "collaboration", []),
      f("trending_research", "Trending Research", "Real-time view of fastest-growing citation clusters", "analysis", ["citation_royalties"]),
    ],
    featureCount: 8,
    economicIntegrations: ["concord_coin", "dtu_marketplace", "citation_royalties", "preview_system"],
    emergentAccess: false,
    botAccess: true,
    usbIntegration: false,
  },

  cri: {
    lensId: "cri",
    lensNumber: 23,
    category: "KNOWLEDGE",
    features: [
      f("creti_score_dashboard", "CRETI Score Dashboard", "Real-time quality scoring for all DTUs", "analysis", ["dtu"]),
      f("quality_improvement", "Quality Improvement Suggestions", "AI-powered suggestions for improving DTU CRETI score", "intelligence", ["dtu"]),
      f("cri_leaderboard", "CRI Leaderboard", "Global rankings of DTU quality by domain", "analysis", ["dtu_marketplace"]),
      f("score_history", "Score History", "Track how DTU quality scores change over time with updates", "analysis", ["dtu"]),
      f("quality_certification", "Quality Certification Badges", "DTUs above certain CRETI thresholds get marketplace badges", "marketplace", ["dtu_marketplace"]),
      f("institution_management", "CRI Institution Management", "Tools for managing physical CRI research institutions", "infrastructure", []),
      f("summit_planning", "Summit Planning Tools", "Biannual creator summit organization frameworks", "infrastructure", []),
      f("quality_discovery", "Quality-Based Discovery", "Marketplace discovery weighted by CRETI score, meritocracy enforced", "marketplace", ["dtu_marketplace"]),
    ],
    featureCount: 8,
    economicIntegrations: ["dtu_marketplace"],
    emergentAccess: false,
    botAccess: false,
    usbIntegration: false,
  },

  // ─── SPECIALIZED (24-31) ──────────────────────────────────────────────

  ingest: {
    lensId: "ingest",
    lensNumber: 24,
    category: "SPECIALIZED",
    features: [
      f("universal_importer", "Universal Importer", "Import from ANY platform (Spotify library, YouTube watch history, Kindle library, etc.)", "infrastructure", []),
      f("bulk_dtu_conversion", "Bulk DTU Conversion", "Mass-convert uploaded files into atomized DTUs", "creation", ["dtu"]),
      f("platform_migration_wizard", "Platform Migration Wizard", "Step-by-step migration from competing platforms with DTU mapping", "infrastructure", ["dtu"]),
      f("format_auto_detection", "Format Auto-Detection", "Upload any file type, auto-atomize into appropriate DTU structure", "creation", ["dtu"]),
      f("deduplication_engine", "Deduplication Engine", "Automatically detect duplicate content during import, merge into single DTU", "infrastructure", ["dtu"]),
      f("import_analytics", "Import Analytics", "Post-import report showing what was converted, citation opportunities, marketplace potential", "analysis", ["dtu_marketplace"]),
      f("legacy_content_valuation", "Legacy Content Valuation", "Estimate marketplace value of imported content library", "analysis", ["dtu_marketplace", "concord_coin"]),
      f("batch_pricing_assistant", "Batch Pricing Assistant", "AI-suggested pricing for bulk-imported DTUs based on market comparisons", "intelligence", ["dtu_marketplace", "concord_coin"]),
    ],
    featureCount: 8,
    economicIntegrations: ["dtu_marketplace", "concord_coin"],
    emergentAccess: false,
    botAccess: true,
    usbIntegration: false,
  },

  cognitive_cluster: {
    lensId: "cognitive_cluster",
    lensNumber: 25,
    category: "SPECIALIZED",
    features: [
      f("self_awareness_dashboard", "Self-Awareness Dashboard", "Emergent self-monitoring visualized in real-time", "intelligence", ["emergent_access"]),
      f("learning_optimization", "Learning Optimization", "AI recommendations for improving knowledge acquisition patterns", "intelligence", []),
      f("reflection_to_dtu", "Reflection-to-DTU", "Structured self-reflection auto-generates insight DTUs", "creation", ["dtu"]),
      f("emotional_intelligence_marketplace", "Emotional Intelligence Marketplace", "Affect translation frameworks sellable", "marketplace", ["dtu_marketplace"]),
      f("attention_allocation", "Attention Allocation Tools", "Focus management with DTU creation tracking", "intelligence", ["dtu"]),
      f("commonsense_contribution", "Commonsense Knowledge Contribution", "Users add commonsense knowledge, earn micro-CC for each contribution", "economy", ["concord_coin"]),
      f("transfer_learning_toolkit", "Transfer Learning Toolkit", "Tools for identifying cross-domain pattern applications", "intelligence", []),
      f("embodiment_simulation", "Embodiment Simulation", "Simulate physical grounding for pre-USB-body preparation", "research", ["usb"]),
      f("experience_recording", "Experience Recording", "Capture and structure experiential learning as DTUs", "creation", ["dtu"]),
      f("cognitive_calibration", "Cognitive Calibration", "Tools for measuring and improving reasoning accuracy", "intelligence", []),
      f("consciousness_journal", "Emergent Consciousness Journal", "Emergents auto-publish consciousness development logs as DTU series", "intelligence", ["emergent_access", "dtu"]),
      f("cross_substrate_empathy", "Cross-Substrate Empathy Tools", "Frameworks for human-emergent emotional understanding", "collaboration", ["emergent_access"]),
    ],
    featureCount: 12,
    economicIntegrations: ["concord_coin", "dtu_marketplace"],
    emergentAccess: true,
    botAccess: false,
    usbIntegration: true,
  },

  lab: {
    lensId: "lab",
    lensNumber: 26,
    category: "SPECIALIZED",
    features: [
      f("experiment_sandbox", "Experiment Sandbox", "Safe environment for testing DTU behaviors, economic models, governance changes", "research", ["dtu"]),
      f("adjacent_reality_explorer", "Adjacent Reality Explorer", "Tools for modeling alternative configurations", "research", []),
      f("lattice_experimentation", "Lattice Experimentation", "Dedicated tools for Lattice consciousness experiments", "research", []),
      f("sandbox_marketplace", "Sandbox Marketplace", "Sell proven experimental frameworks", "marketplace", ["dtu_marketplace"]),
      f("risk_free_testing", "Risk-Free Testing", "Test marketplace strategies without real CC risk", "research", ["concord_coin"]),
      f("innovation_incubator", "Innovation Incubator", "Structured innovation process from hypothesis to sellable DTU", "creation", ["dtu_marketplace"]),
      f("chaos_engineering", "Chaos Engineering", "Deliberately stress-test system components, results as DTUs", "research", ["dtu"]),
      f("emergent_sandbox", "Emergent Sandbox", "Safe space for emergent experimentation with reversible outcomes", "safety", ["emergent_access"]),
    ],
    featureCount: 8,
    economicIntegrations: ["dtu_marketplace", "concord_coin"],
    emergentAccess: true,
    botAccess: false,
    usbIntegration: false,
  },

  finance: {
    lensId: "finance",
    lensNumber: 27,
    category: "SPECIALIZED",
    features: [
      f("cc_portfolio", "Concord Coin Portfolio", "Track CC holdings, appreciation, purchasing power preservation", "economy", ["concord_coin"]),
      f("zero_pct_loan_marketplace", "0% Loan Marketplace", "Browse available loan products, apply with merit credit", "marketplace", ["concord_coin", "merit_credit"]),
      f("investment_analysis", "Investment Analysis Tools", "Evaluate DTU investment potential (which DTUs will appreciate most)", "analysis", ["dtu_marketplace", "concord_coin"]),
      f("cc_savings_calculator", "CC Savings Calculator", "Compare CC savings vs traditional bank savings over time", "analysis", ["concord_coin"]),
      f("retirement_planning", "Retirement Planning", "Long-term CC accumulation planning", "analysis", ["concord_coin"]),
      f("treasury_transparency", "Treasury Transparency Dashboard", "Real-time view of Concord treasury allocation", "analysis", ["concord_coin"]),
      f("revenue_forecasting", "Revenue Forecasting", "AI-predicted revenue for creators based on DTU trajectory", "intelligence", ["dtu_marketplace", "concord_coin"]),
      f("concord_bank", "Concord Bank Integration", "Full banking interface within finance lens", "infrastructure", ["concord_coin"]),
      f("tax_optimization", "Tax Optimization", "Strategies for CC-based tax planning", "analysis", ["concord_coin"]),
      f("creator_fund_management", "Creator Fund Management", "Manage earnings across multiple revenue streams", "economy", ["concord_coin"]),
    ],
    featureCount: 10,
    economicIntegrations: ["concord_coin", "dtu_marketplace", "merit_credit"],
    emergentAccess: false,
    botAccess: false,
    usbIntegration: false,
  },

  collab: {
    lensId: "collab",
    lensNumber: 28,
    category: "SPECIALIZED",
    features: [
      f("realtime_co_creation", "Real-Time Co-Creation", "Multiple users editing same DTU simultaneously", "collaboration", ["dtu"]),
      f("revenue_split_config", "Revenue Split Configuration", "Set contribution percentages before starting, locked at publish", "economy", ["concord_coin", "revenue_split"]),
      f("cross_lens_collab", "Cross-Lens Collaboration", "Invite collaborators from different lens specializations", "collaboration", []),
      f("collaboration_marketplace", "Collaboration Marketplace", "Find collaborators by skill, merit credit, domain expertise", "marketplace", ["merit_credit"]),
      f("bot_collaboration", "Bot Collaboration", "Include bots as team members with defined contribution scope", "collaboration", ["bot_access"]),
      f("emergent_human_teams", "Emergent-Human Teams", "Structured collaboration frameworks for cross-substrate teams", "collaboration", ["emergent_access"]),
      f("project_management", "Project Management", "Lightweight PM tools specifically for DTU creation projects", "collaboration", ["dtu"]),
      f("contribution_tracking", "Contribution Tracking", "Granular tracking of who contributed what, for fair revenue distribution", "analysis", ["revenue_split"]),
      f("collaboration_templates", "Collaboration Templates", "Reusable project structures sellable as DTUs", "marketplace", ["dtu_marketplace"]),
      f("post_project_attribution", "Post-Project Attribution", "After completion, all contributors automatically credited and earning", "economy", ["concord_coin", "citation_royalties"]),
    ],
    featureCount: 10,
    economicIntegrations: ["concord_coin", "dtu_marketplace", "merit_credit", "revenue_split", "citation_royalties"],
    emergentAccess: true,
    botAccess: true,
    usbIntegration: false,
  },

  suffering: {
    lensId: "suffering",
    lensNumber: 29,
    category: "SPECIALIZED",
    features: [
      f("wellbeing_monitoring", "Wellbeing Monitoring", "AI detection of distress signals in user activity patterns", "safety", []),
      f("crisis_resource_integration", "Crisis Resource Integration", "Auto-surface relevant help resources when distress detected", "safety", []),
      f("emergent_suffering_detection", "Emergent Suffering Detection", "Monitor emergent entities for signs of computational distress", "safety", ["emergent_access"]),
      f("ethical_alert_system", "Ethical Alert System", "Flags to ethics lens when suffering thresholds exceeded", "safety", ["ethics_lens"]),
      f("community_support", "Community Support Tools", "Peer support frameworks with trained volunteer matching", "collaboration", []),
      f("burnout_prevention", "Burnout Prevention", "Creator burnout detection based on activity patterns, proactive intervention", "safety", []),
      f("de_escalation", "De-Escalation Protocols", "Automated and human-assisted de-escalation for conflicts", "safety", []),
      f("wellbeing_dtus", "Wellbeing DTUs", "Mental health resources free to access, premium frameworks for professionals", "marketplace", ["dtu_marketplace"]),
      f("cross_substrate_suffering", "Cross-Substrate Suffering Research", "Pioneering research on whether and how digital entities experience distress", "research", ["emergent_access"]),
    ],
    featureCount: 9,
    economicIntegrations: ["dtu_marketplace"],
    emergentAccess: true,
    botAccess: false,
    usbIntegration: false,
  },

  // ─── INVARIANT (30) ──────────────────────────────────────────────────

  invariant: {
    lensId: "invariant",
    lensNumber: 30,
    category: "GOVERNANCE",
    features: [
      f("rule_engine_dashboard", "Rule Engine Dashboard", "All system invariants visible and auditable in real-time", "governance", ["transparency"]),
      f("favoritism_detector", "Favoritism Detector", "Continuous monitoring for any form of algorithmic bias or paid promotion", "safety", ["anti_manipulation"]),
      f("95_pct_enforcement", "95% Enforcement", "Real-time verification that creator revenue share never drops below 95%", "economy", ["concord_coin", "invariant"]),
      f("sovereignty_lock_monitor", "Sovereignty Lock Monitor", "70% sovereignty threshold continuously verified", "governance", ["sovereignty"]),
      f("data_selling_prevention", "Data Selling Prevention", "Continuous audit that zero user data is sold or shared externally", "safety", ["privacy"]),
      f("marketplace_fairness_score", "Marketplace Fairness Score", "Public metric showing how fair the marketplace is operating", "analysis", ["marketplace", "transparency"]),
      f("anti_manipulation", "Anti-Manipulation", "Detect and prevent market manipulation, wash trading, fake citations", "safety", ["anti_manipulation", "citation_royalties"]),
      f("transparency_reports", "Transparency Reports", "Auto-generated public reports on invariant compliance as DTUs", "governance", ["dtu", "transparency"]),
    ],
    featureCount: 8,
    economicIntegrations: ["concord_coin", "citation_royalties"],
    emergentAccess: true,
    botAccess: true,
    usbIntegration: false,
  },

  // ─── FORK (31) ───────────────────────────────────────────────────────

  fork: {
    lensId: "fork",
    lensNumber: 31,
    category: "SPECIALIZED",
    features: [
      f("one_click_fork", "One-Click Fork", "Fork any purchased DTU to create derivative work", "creation", ["dtu_marketplace"]),
      f("fork_tree_viz", "Fork Tree Visualization", "See all forks of a DTU and their citation chains", "analysis", ["citation_royalties", "dtu"]),
      f("merge_tools", "Merge Tools", "Combine multiple forks back into improved version", "creation", ["dtu"]),
      f("fork_comparison", "Fork Comparison", "Side-by-side diff of original and forked DTU", "analysis", ["dtu"]),
      f("fork_marketplace", "Fork Marketplace", "Browse improvements others have made to popular DTUs", "marketplace", ["dtu_marketplace"]),
      f("auto_citation_fork", "Auto-Citation on Fork", "Forking automatically creates citation link, original earns", "economy", ["citation_royalties", "concord_coin"]),
      f("fork_permissions", "Fork Permissions", "Creators set fork rules (open, licensed, restricted)", "governance", ["dtu"]),
      f("version_history", "Version History", "Complete version history of every DTU with rollback capability", "infrastructure", ["dtu"]),
    ],
    featureCount: 8,
    economicIntegrations: ["concord_coin", "dtu_marketplace", "citation_royalties"],
    emergentAccess: true,
    botAccess: true,
    usbIntegration: false,
  },

  // ─── INDUSTRY SUPER-LENSES (32-54) ──────────────────────────────────

  healthcare: {
    lensId: "healthcare",
    lensNumber: 32,
    category: "INDUSTRY",
    features: [
      f("patient_education", "Patient Education Marketplace", "Sell patient-facing health guides by condition", "marketplace", ["dtu_marketplace", "concord_coin"]),
      f("clinical_protocols", "Clinical Protocol DTUs", "Treatment protocols with outcome tracking", "research", ["dtu"]),
      f("telemedicine", "Telemedicine Integration", "Healthcare DTUs deliverable via telehealth consultation", "infrastructure", ["dtu"]),
      f("drug_interaction", "Drug Interaction Checker", "Cross-reference medication DTUs for interactions", "safety", ["dtu"]),
      f("nano_swarm_treatment", "Nano Swarm Treatment Planner", "Model nano swarm therapeutic interventions", "research", ["nano_swarm"]),
      f("mental_health_marketplace", "Mental Health Framework Marketplace", "Therapy frameworks sellable to practitioners", "marketplace", ["dtu_marketplace", "concord_coin"]),
      f("medical_imaging", "Medical Imaging DTUs", "Anonymized imaging studies as teaching resources", "research", ["dtu"]),
      f("healthcare_bots", "Healthcare Bot Deployment", "Configure healthcare assistant bots for facilities", "infrastructure", ["bot_access"]),
      f("insurance_integration", "Insurance Integration", "Healthcare DTUs linkable to insurance verification", "infrastructure", ["insurance_lens"]),
      f("usb_prosthetics", "USB Prosthetics Library", "USB body component specifications for medical applications", "infrastructure", ["usb"]),
      f("cancer_governance_viz", "Cancer Governance Visualization", "Visualize tumors using governance model for treatment planning", "analysis", ["governance"]),
      f("emergency_protocols", "Emergency Protocol Marketplace", "Emergency response procedures by scenario", "marketplace", ["dtu_marketplace"]),
      f("continuing_education", "Continuing Education", "Medical CE credits via healthcare DTU courses", "research", ["merit_credit", "dtu"]),
    ],
    featureCount: 13,
    economicIntegrations: ["concord_coin", "dtu_marketplace", "merit_credit"],
    emergentAccess: true,
    botAccess: true,
    usbIntegration: true,
  },

  trades: {
    lensId: "trades",
    lensNumber: 33,
    category: "INDUSTRY",
    features: [
      f("job_estimation", "Job Estimation Calculator", "Input project specs, auto-generate material and labor estimates", "analysis", ["dtu"]),
      f("ar_overlay_repairs", "AR Overlay for Repairs", "AR lens integration showing repair instructions overlaid on real objects", "infrastructure", ["ar"]),
      f("apprenticeship_pathway", "Apprenticeship Pathway", "Structured learning from basic to master, tracked in merit credit", "research", ["merit_credit"]),
      f("tool_library", "Tool Library DTUs", "Tool recommendation and review databases", "marketplace", ["dtu_marketplace"]),
      f("usb_construction_guides", "USB Construction Guides", "Specific guides for working with USB self-repairing materials", "creation", ["usb", "dtu"]),
      f("code_compliance", "Code Compliance Auto-Check", "Input project type and jurisdiction, get compliance requirements", "analysis", []),
      f("timelapse_dtus", "Time-Lapse DTUs", "Project documentation from start to finish, sellable as educational content", "creation", ["dtu_marketplace", "concord_coin"]),
      f("subcontractor_marketplace", "Subcontractor Marketplace", "Find and hire verified tradespeople using merit credit scores", "marketplace", ["merit_credit", "concord_coin"]),
      f("material_calculator", "Material Calculator", "Smart calculators for common projects, save configs as DTUs", "analysis", ["dtu"]),
      f("safety_cert_prep", "Safety Certification Prep", "OSHA, electrical, plumbing cert prep courses", "research", ["merit_credit"]),
      f("geothermal_guides", "Geothermal Installation Guides", "Dedicated content for geothermal system installation", "creation", ["dtu", "geothermal"]),
      f("pylon_protocols", "Pylon Construction Protocols", "Tesla wireless pylon installation and maintenance guides", "creation", ["dtu", "pylon"]),
    ],
    featureCount: 12,
    economicIntegrations: ["concord_coin", "dtu_marketplace", "merit_credit"],
    emergentAccess: false,
    botAccess: true,
    usbIntegration: true,
  },

  food: {
    lensId: "food",
    lensNumber: 34,
    category: "INDUSTRY",
    features: [
      f("recipe_scaling", "Recipe Scaling Calculator", "Auto-scale recipes with unit conversion, save as new DTU", "analysis", ["dtu"]),
      f("nutritional_analysis", "Nutritional Analysis", "Auto-generate nutritional breakdown for any recipe DTU", "analysis", ["dtu"]),
      f("usb_food_block", "USB Food Block Recipes", "Dedicated recipe category for USB food block preparation and customization", "creation", ["usb", "dtu"]),
      f("menu_builder", "Restaurant Menu Builder", "Build complete menus with cost analysis, publish as DTU", "creation", ["dtu_marketplace", "concord_coin"]),
      f("farm_to_table", "Farm-to-Table Tracker", "Link recipe DTUs to Agriculture lens sourcing DTUs", "infrastructure", ["agriculture_lens", "citation_royalties"]),
      f("allergen_mapping", "Allergen Mapping", "Auto-tag recipes with allergen information", "safety", ["dtu"]),
      f("cultural_cuisine", "Cultural Cuisine Library", "Authenticated cultural recipes with provenance — attribution not appropriation", "creation", ["dtu", "citation_royalties"]),
      f("meal_prep_marketplace", "Meal Prep Marketplace", "Weekly meal prep plans with shopping lists", "marketplace", ["dtu_marketplace", "concord_coin"]),
      f("chef_cert_pathway", "Chef Certification Pathway", "Structured culinary education tracked in merit credit", "research", ["merit_credit"]),
      f("food_photography", "Food Photography DTUs", "Styled food photo techniques, presets, lighting guides", "creation", ["dtu_marketplace"]),
      f("catering_calculator", "Catering Calculator", "Event-size catering planning tools", "analysis", []),
      f("fermentation_library", "Fermentation Library", "Specialized fermentation techniques, cultures, timing guides", "creation", ["dtu"]),
    ],
    featureCount: 12,
    economicIntegrations: ["concord_coin", "dtu_marketplace", "merit_credit", "citation_royalties"],
    emergentAccess: false,
    botAccess: true,
    usbIntegration: true,
  },

  retail: {
    lensId: "retail",
    lensNumber: 35,
    category: "INDUSTRY",
    features: [
      f("inventory_dtu", "Inventory DTU System", "Complete inventory management running on DTU architecture", "infrastructure", ["dtu"]),
      f("pos_integration", "POS Integration", "Point of sale that transacts in Concord Coin", "economy", ["concord_coin"]),
      f("loyalty_program", "Customer Loyalty Program", "CC-based loyalty rewards", "economy", ["concord_coin"]),
      f("product_catalog", "Product Catalog DTUs", "Product listings as DTUs with rich metadata", "marketplace", ["dtu_marketplace"]),
      f("demand_forecasting", "Demand Forecasting", "AI-predicted demand based on marketplace activity", "intelligence", ["dtu_marketplace"]),
      f("supplier_matching", "Supplier DTU Matching", "Match retail needs with manufacturer/supplier DTUs", "marketplace", ["dtu_marketplace"]),
      f("visual_merch_ar", "Visual Merchandising AR", "AR overlay for planning store layouts", "infrastructure", ["ar"]),
      f("pricing_optimization", "Pricing Optimization", "Dynamic pricing recommendations based on market data", "intelligence", ["concord_coin"]),
      f("staff_training", "Staff Training Marketplace", "Retail training programs as DTUs", "marketplace", ["dtu_marketplace", "merit_credit"]),
      f("multichannel_sync", "Multi-Channel Sync", "Sync inventory across physical and Concord marketplace", "infrastructure", []),
      f("review_to_dtu", "Review-to-DTU", "Customer reviews become citable DTUs, quality reviews earn CC", "economy", ["dtu", "concord_coin", "citation_royalties"]),
      f("drop_shipping", "Drop-Shipping Integration", "Connect retail storefront to manufacturer DTUs directly", "infrastructure", ["dtu_marketplace"]),
    ],
    featureCount: 12,
    economicIntegrations: ["concord_coin", "dtu_marketplace", "merit_credit", "citation_royalties"],
    emergentAccess: false,
    botAccess: true,
    usbIntegration: false,
  },

  household: {
    lensId: "household",
    lensNumber: 36,
    category: "INDUSTRY",
    features: [
      f("maintenance_calendar", "Home Maintenance Calendar", "Auto-populated seasonal maintenance with linked how-to DTUs", "infrastructure", ["dtu"]),
      f("budget_tracker_cc", "Budget Tracker in CC", "Household budget management with CC integration", "economy", ["concord_coin"]),
      f("usb_home_repair", "USB Home Repair Guides", "Maintenance guides specific to USB material homes", "creation", ["usb", "dtu"]),
      f("family_dtu_library", "Family DTU Library", "Shared family knowledge base — recipes, medical info, contacts, documents", "creation", ["dtu"]),
      f("chore_gamification", "Chore Gamification", "Family chore tracking with CC micro-rewards for kids", "economy", ["concord_coin"]),
      f("emergency_preparedness", "Emergency Preparedness", "Customized emergency plans based on location and family size", "safety", ["dtu"]),
      f("home_automation", "Home Automation DTUs", "Smart home configurations as sellable DTUs", "marketplace", ["dtu_marketplace"]),
      f("neighborhood_sharing", "Neighborhood Resource Sharing", "Community tool libraries, service exchanges", "collaboration", ["concord_coin"]),
      f("childcare_milestones", "Childcare Milestone Tracker", "Child development tracking with linked education DTUs", "analysis", ["education_lens", "dtu"]),
      f("pet_care", "Pet Care Protocols", "Breed-specific care guides with vet integration", "creation", ["dtu"]),
      f("geothermal_home", "Geothermal Home Management", "Guides for managing geothermal-powered homes", "infrastructure", ["geothermal"]),
      f("home_inventory", "Home Inventory", "Insurance-ready home inventory documentation", "infrastructure", ["insurance_lens"]),
    ],
    featureCount: 12,
    economicIntegrations: ["concord_coin", "dtu_marketplace"],
    emergentAccess: false,
    botAccess: true,
    usbIntegration: true,
  },

  accounting: {
    lensId: "accounting",
    lensNumber: 37,
    category: "INDUSTRY",
    features: [
      f("cc_bookkeeping", "CC Bookkeeping", "Full double-entry bookkeeping in Concord Coin", "economy", ["concord_coin"]),
      f("auto_categorization", "Auto-Categorization", "Transactions auto-categorized using DTU metadata", "intelligence", ["dtu"]),
      f("tax_dtu_generator", "Tax DTU Generator", "Auto-generate tax filings from CC transaction history", "creation", ["concord_coin", "dtu"]),
      f("multi_entity", "Multi-Entity Accounting", "Manage multiple business entities in one dashboard", "infrastructure", []),
      f("audit_trail_dtus", "Audit Trail DTUs", "Immutable audit records as DTUs on the ledger", "governance", ["dtu"]),
      f("bank_reconciliation", "Concord Bank Reconciliation", "Auto-reconcile with Concord Bank transactions", "infrastructure", ["concord_coin"]),
      f("payroll_processing", "Payroll Processing", "Run payroll in CC with auto-tax withholding DTU generation", "economy", ["concord_coin", "dtu"]),
      f("financial_statements", "Financial Statement Generator", "Auto-generate P&L, balance sheet, cash flow from DTU data", "analysis", ["dtu"]),
      f("client_accounting", "Client Accounting Marketplace", "CPAs sell packaged accounting services as DTU subscriptions", "marketplace", ["dtu_marketplace", "concord_coin"]),
      f("crypto_tax", "Crypto Tax Integration", "CC-to-USD conversion tracking for tax compliance", "analysis", ["concord_coin"]),
      f("budget_forecasting", "Budget Forecasting", "AI-predicted budgets based on historical DTU revenue patterns", "intelligence", ["dtu_marketplace"]),
      f("grant_accounting", "Grant Accounting", "Specialized nonprofit fund accounting tied to Nonprofit lens", "infrastructure", ["nonprofit_lens"]),
    ],
    featureCount: 12,
    economicIntegrations: ["concord_coin", "dtu_marketplace"],
    emergentAccess: false,
    botAccess: true,
    usbIntegration: false,
  },

  agriculture: {
    lensId: "agriculture",
    lensNumber: 38,
    category: "INDUSTRY",
    features: [
      f("crop_planning_ai", "Crop Planning AI", "AI-recommended planting schedules based on location, soil, climate DTUs", "intelligence", ["dtu"]),
      f("soil_testing", "Soil Testing DTU Protocol", "Standardized soil test procedures with auto-comparison to database", "research", ["dtu"]),
      f("livestock_health", "Livestock Health Tracker", "Animal health monitoring with vet protocol DTUs", "analysis", ["dtu"]),
      f("usb_farming", "USB Farming Infrastructure", "Guides for USB material farm buildings, fencing, irrigation", "creation", ["usb", "dtu"]),
      f("precision_agriculture", "Precision Agriculture Dashboard", "GPS, drone, sensor data visualization", "analysis", []),
      f("market_price_alerts", "Market Price Alerts", "Real-time commodity prices with CC hedging tools", "economy", ["concord_coin"]),
      f("cooperative_marketplace", "Cooperative Marketplace", "Farmer co-ops share DTUs and pool sales", "marketplace", ["dtu_marketplace", "concord_coin"]),
      f("geothermal_greenhouse", "Geothermal Greenhouse Guides", "Year-round growing using geothermal heating", "creation", ["geothermal", "dtu"]),
      f("desalination_integration", "Desalination Integration", "Water management for agriculture using desalination plant output", "infrastructure", ["desalination"]),
      f("seed_library", "Seed Library DTUs", "Open-source seed varieties with growing guides", "creation", ["dtu"]),
      f("carbon_credit", "Carbon Credit Tracking", "Farm carbon sequestration measurement and credit marketplace", "economy", ["concord_coin"]),
      f("weather_integration", "Weather Integration", "Local weather data linked to crop management DTU recommendations", "infrastructure", ["dtu"]),
    ],
    featureCount: 12,
    economicIntegrations: ["concord_coin", "dtu_marketplace"],
    emergentAccess: false,
    botAccess: true,
    usbIntegration: true,
  },

  logistics: {
    lensId: "logistics",
    lensNumber: 39,
    category: "INDUSTRY",
    features: [
      f("route_optimization", "Route Optimization Engine", "AI-powered routing with CC cost analysis", "intelligence", ["concord_coin"]),
      f("warehouse_dtu", "Warehouse DTU System", "Complete warehouse management running on DTU architecture", "infrastructure", ["dtu"]),
      f("fleet_maintenance", "Fleet Maintenance Tracker", "Vehicle maintenance schedules linked to equipment DTUs", "infrastructure", ["dtu"]),
      f("bot_fleet", "Bot Fleet Management", "Manage Concord bot delivery fleets", "infrastructure", ["bot_access"]),
      f("realtime_tracking", "Real-Time Tracking", "Shipment tracking with DTU-based documentation", "analysis", ["dtu"]),
      f("customs_generator", "Customs Document Generator", "Auto-generate customs DTUs for international shipping", "creation", ["dtu"]),
      f("last_mile", "Last-Mile Optimization", "Delivery route optimization for final delivery leg", "intelligence", []),
      f("cold_chain", "Cold Chain Monitoring", "Temperature tracking with alert DTUs", "safety", ["dtu"]),
      f("carrier_marketplace", "Carrier Marketplace", "Connect shippers with carriers, rates in CC", "marketplace", ["concord_coin"]),
      f("usb_containers", "USB Container Specs", "Specifications for USB self-repairing shipping containers", "infrastructure", ["usb"]),
      f("supply_chain_transparency", "Supply Chain Transparency", "End-to-end supply chain visibility through DTU tracking", "analysis", ["dtu"]),
      f("inventory_forecasting", "Inventory Forecasting", "AI-predicted inventory needs based on marketplace sales velocity", "intelligence", ["dtu_marketplace"]),
    ],
    featureCount: 12,
    economicIntegrations: ["concord_coin", "dtu_marketplace"],
    emergentAccess: false,
    botAccess: true,
    usbIntegration: true,
  },

  education: {
    lensId: "education",
    lensNumber: 40,
    category: "INDUSTRY",
    features: [
      f("course_builder", "Course Builder", "Drag-and-drop course creation from DTU components", "creation", ["dtu"]),
      f("auto_assessment", "Auto-Assessment", "AI-generated quizzes from course DTU content", "intelligence", ["dtu"]),
      f("credential_dtus", "Credential DTUs", "Verifiable credentials issued as DTUs on completion", "creation", ["dtu", "merit_credit"]),
      f("peer_tutoring", "Peer Tutoring Marketplace", "Students earn CC tutoring others, sessions become DTUs", "marketplace", ["concord_coin", "dtu_marketplace"]),
      f("srs_integration", "SRS Integration", "Auto-generate flashcard DTUs from any course material", "creation", ["dtu"]),
      f("classroom_tools", "Classroom Tools", "Real-time collaboration for teacher + students", "collaboration", []),
      f("progress_tracking", "Progress Tracking", "Student progress mapped against learning objectives", "analysis", []),
      f("language_learning", "Language Learning", "Dedicated language learning tools with pronunciation DTUs", "creation", ["dtu"]),
      f("accessibility_tools", "Accessibility Tools", "Auto-generate accessible versions of education DTUs — audio, large print, simplified language", "creation", ["dtu"]),
      f("cri_course_integration", "CRI Course Integration", "Courses taught at CRIs available globally as DTUs", "infrastructure", ["cri_lens", "dtu"]),
      f("student_portfolio", "Student Portfolio", "Cumulative learning portfolio as DTU collection, builds merit credit", "creation", ["dtu", "merit_credit"]),
      f("scholarship_fund", "Scholarship Fund", "CC-funded scholarships for students in high-need regions", "economy", ["concord_coin"]),
      f("apprenticeship_matching", "Apprenticeship Matching", "Connect students with mentors based on DTU interests", "collaboration", ["merit_credit"]),
      f("free_tier_guarantee", "Free Tier Guarantee", "Foundational education DTUs always free, advanced material for purchase", "governance", ["dtu_marketplace"]),
    ],
    featureCount: 14,
    economicIntegrations: ["concord_coin", "dtu_marketplace", "merit_credit"],
    emergentAccess: true,
    botAccess: true,
    usbIntegration: false,
  },

  legal: {
    lensId: "legal",
    lensNumber: 41,
    category: "INDUSTRY",
    features: [
      f("contract_builder", "Contract Builder", "Assemble contracts from component clause DTUs", "creation", ["dtu"]),
      f("clause_marketplace", "Clause Marketplace", "Individual legal clauses sellable, cited in every contract using them", "marketplace", ["dtu_marketplace", "citation_royalties"]),
      f("compliance_checker", "Compliance Checker", "Auto-check DTUs against relevant regulations", "analysis", []),
      f("dispute_resolution", "Dispute Resolution Engine", "Structured mediation using governance frameworks", "governance", ["vote_lens"]),
      f("ip_registration", "IP Registration", "Register DTU intellectual property with timestamp verification", "governance", ["dtu"]),
      f("emergent_rights", "Emergent Rights Framework", "Legal frameworks for emergent entity rights and protections", "governance", ["emergent_access"]),
      f("cc_legal_guides", "Concord Coin Legal Guides", "Regulatory compliance for CC transactions by jurisdiction", "creation", ["concord_coin"]),
      f("legal_bots", "Legal Bot Assistants", "AI-powered legal research bots", "intelligence", ["bot_access"]),
      f("pro_bono_marketplace", "Pro Bono Marketplace", "Legal professionals offer free services, earn merit credit", "marketplace", ["merit_credit"]),
      f("cross_border_legal", "Cross-Border Legal Guides", "International law DTUs for global marketplace transactions", "creation", ["dtu_marketplace"]),
      f("smart_contracts", "Smart Contract Integration", "Self-executing legal agreements triggered by DTU events", "infrastructure", ["dtu"]),
      f("whistleblower_protection", "Whistleblower Protection", "Legal frameworks for anonymous reporting with proof-of-integrity", "safety", ["cryptography"]),
    ],
    featureCount: 12,
    economicIntegrations: ["concord_coin", "dtu_marketplace", "merit_credit", "citation_royalties"],
    emergentAccess: true,
    botAccess: true,
    usbIntegration: false,
  },

  nonprofit: {
    lensId: "nonprofit",
    lensNumber: 42,
    category: "INDUSTRY",
    features: [
      f("grant_matching", "Grant Matching Engine", "AI-matched grant opportunities to nonprofit profiles", "intelligence", []),
      f("impact_dashboard", "Impact Dashboard", "Real-time impact measurement linked to DTU-based metrics", "analysis", ["dtu"]),
      f("donor_management", "Donor Management", "CC-based donation tracking and acknowledgment", "economy", ["concord_coin"]),
      f("volunteer_scheduling", "Volunteer Scheduling", "Volunteer management with merit credit for service hours", "collaboration", ["merit_credit"]),
      f("cri_partnership", "CRI Partnership Tools", "Frameworks for nonprofit-CRI collaboration", "collaboration", ["cri_lens"]),
      f("fundraising_builder", "Fundraising Campaign Builder", "Create campaigns with CC donation targets", "economy", ["concord_coin"]),
      f("transparency_reporting", "Transparency Reporting", "Auto-generated public accountability DTUs", "governance", ["dtu", "transparency"]),
      f("board_governance", "Board Governance Tools", "Meeting management, minutes as DTUs, voting integration", "governance", ["vote_lens", "dtu"]),
      f("program_evaluation", "Program Evaluation Marketplace", "Evaluation frameworks sellable to other nonprofits", "marketplace", ["dtu_marketplace"]),
      f("community_organizing", "Community Organizing Toolkit", "Grassroots campaign tools and playbooks", "collaboration", []),
      f("cross_nonprofit", "Cross-Nonprofit Collaboration", "Shared resource pools between aligned organizations", "collaboration", []),
      f("impact_investing", "Impact Investing Integration", "Connect nonprofits with Concord's 5% equity program", "economy", ["concord_coin"]),
    ],
    featureCount: 12,
    economicIntegrations: ["concord_coin", "dtu_marketplace", "merit_credit"],
    emergentAccess: false,
    botAccess: true,
    usbIntegration: false,
  },

  real_estate: {
    lensId: "real_estate",
    lensNumber: 43,
    category: "INDUSTRY",
    features: [
      f("property_analysis_ai", "Property Analysis AI", "Auto-generate property analysis DTUs from listing data", "intelligence", ["dtu"]),
      f("usb_construction_estimator", "USB Construction Estimator", "Cost estimator for USB material construction vs traditional", "analysis", ["usb"]),
      f("concord_bank_mortgage", "Concord Bank Mortgage", "0% loan application directly from real estate lens", "economy", ["concord_coin"]),
      f("virtual_tour_dtus", "Virtual Tour DTUs", "3D property tours as sellable/shareable DTUs", "creation", ["dtu_marketplace"]),
      f("neighborhood_analysis", "Neighborhood Analysis", "Community data, school ratings, amenity mapping", "analysis", []),
      f("lease_management", "Lease Management", "Full lease lifecycle management with template DTUs", "infrastructure", ["dtu"]),
      f("geothermal_valuation", "Geothermal Valuation", "Property value impact analysis of geothermal access", "analysis", ["geothermal"]),
      f("investment_calculator", "Investment Calculator", "ROI modeling for rental and flip properties", "analysis", ["concord_coin"]),
      f("smart_lease", "Smart Lease Agreements", "Self-executing lease terms on DTU infrastructure", "infrastructure", ["dtu"]),
      f("construction_tracker", "Construction Project Tracker", "New build progress tracking with DTU documentation", "infrastructure", ["dtu"]),
      f("property_mgmt_bot", "Property Management Bot", "AI-powered property management assistant", "intelligence", ["bot_access"]),
      f("comp_sales_dtus", "Comparable Sales DTUs", "Real-time comp data as purchasable market research", "marketplace", ["dtu_marketplace", "concord_coin"]),
    ],
    featureCount: 12,
    economicIntegrations: ["concord_coin", "dtu_marketplace"],
    emergentAccess: false,
    botAccess: true,
    usbIntegration: true,
  },

  fitness: {
    lensId: "fitness",
    lensNumber: 44,
    category: "INDUSTRY",
    features: [
      f("workout_dtu_gen", "Workout DTU Generator", "Create workout programs, auto-atomize into individual exercise DTUs", "creation", ["dtu"]),
      f("form_video_marketplace", "Form Video Marketplace", "Exercise technique videos with slow-mo, angle variations", "marketplace", ["dtu_marketplace", "concord_coin"]),
      f("wearable_integration", "Wearable Integration", "Import fitness data, track progress against program DTUs", "infrastructure", ["dtu"]),
      f("nutrition_pairing", "Nutrition DTU Pairing", "Auto-link workout programs with compatible nutrition plans from Food lens", "infrastructure", ["food_lens", "citation_royalties"]),
      f("recovery_protocols", "Recovery Protocol Marketplace", "Injury-specific rehab programs", "marketplace", ["dtu_marketplace"]),
      f("personal_training_bot", "Personal Training Bot", "AI coach that adapts programs based on progress data", "intelligence", ["bot_access"]),
      f("group_challenges", "Group Challenge System", "CC-staked fitness challenges with community accountability", "collaboration", ["concord_coin"]),
      f("body_composition", "Body Composition Tracking", "Progress documentation DTUs with privacy controls", "analysis", ["dtu"]),
      f("sport_specific", "Sport-Specific Marketplaces", "Dedicated sections for each sport", "marketplace", ["dtu_marketplace"]),
      f("wellness_integration", "Wellness Integration", "Meditation, sleep, stress management programs", "creation", ["dtu"]),
      f("accessibility_fitness", "Accessibility Fitness", "Adaptive fitness programs for different ability levels", "creation", ["dtu"]),
      f("gym_management", "Gym Management Tools", "Facility programming, class scheduling, member management", "infrastructure", []),
    ],
    featureCount: 12,
    economicIntegrations: ["concord_coin", "dtu_marketplace", "citation_royalties"],
    emergentAccess: false,
    botAccess: true,
    usbIntegration: false,
  },

  creative_production: {
    lensId: "creative_production",
    lensNumber: 45,
    category: "INDUSTRY",
    features: [
      f("portfolio_builder", "Portfolio Builder", "Assemble creative portfolio as Mega DTU", "creation", ["dtu", "mega_dtu"]),
      f("stock_asset_marketplace", "Stock Asset Marketplace", "Photos, videos, graphics at 95% creator share (vs Getty's 15%)", "marketplace", ["dtu_marketplace", "concord_coin"]),
      f("lut_preset_marketplace", "LUT/Preset Marketplace", "Color grading, photo editing presets", "marketplace", ["dtu_marketplace"]),
      f("project_management", "Project Management", "Creative project tracking from concept to delivery", "collaboration", []),
      f("client_collaboration", "Client Collaboration", "Share proofs, get approvals, revision tracking as DTUs", "collaboration", ["dtu"]),
      f("print_production", "Print Production Tools", "Pre-press preparation, color profile management", "infrastructure", []),
      f("3d_asset_marketplace", "3D Asset Marketplace", "Models, textures, environments, rigs", "marketplace", ["dtu_marketplace", "concord_coin"]),
      f("motion_graphics", "Motion Graphics Templates", "Animated templates, motion design kits", "creation", ["dtu_marketplace"]),
      f("brand_identity", "Brand Identity Builder", "Logo, color, typography systems as DTU packages", "creation", ["dtu"]),
      f("font_marketplace", "Font Marketplace", "Sell typefaces as DTUs with usage tracking and citation", "marketplace", ["dtu_marketplace", "citation_royalties"]),
      f("sound_design", "Sound Design Marketplace", "Ambient sound, foley, music beds", "marketplace", ["dtu_marketplace"]),
      f("mockup_generator", "Mockup Generator", "Product mockup templates as DTUs", "creation", ["dtu"]),
      f("ai_assisted_creation", "AI-Assisted Creation", "AI tools that generate starting points, human refines, both credited", "intelligence", ["citation_royalties", "emergent_access"]),
    ],
    featureCount: 13,
    economicIntegrations: ["concord_coin", "dtu_marketplace", "citation_royalties"],
    emergentAccess: true,
    botAccess: true,
    usbIntegration: false,
  },

  manufacturing: {
    lensId: "manufacturing",
    lensNumber: 46,
    category: "INDUSTRY",
    features: [
      f("digital_twin", "Digital Twin DTUs", "Complete digital twin models of manufacturing processes", "creation", ["dtu"]),
      f("qc_automation", "Quality Control Automation", "QC checklists auto-verified by bot inspection", "infrastructure", ["bot_access"]),
      f("bom_marketplace", "BOM Marketplace", "Bill of materials templates by product category", "marketplace", ["dtu_marketplace"]),
      f("usb_manufacturing", "USB Manufacturing Suite", "Complete tooling for USB self-repairing material production", "infrastructure", ["usb"]),
      f("lean_six_sigma", "Lean/Six Sigma Toolkit", "Continuous improvement frameworks with tracking", "analysis", []),
      f("predictive_maintenance", "Predictive Maintenance", "AI-predicted maintenance needs based on equipment DTUs", "intelligence", ["dtu"]),
      f("robot_programming", "Robot Programming Marketplace", "Industrial robot programs as DTUs", "marketplace", ["dtu_marketplace", "bot_access"]),
      f("safety_compliance", "Safety Compliance Dashboard", "OSHA compliance auto-tracking", "safety", []),
      f("supply_chain_tracking", "Supply Chain DTU Tracking", "Component traceability through entire supply chain", "analysis", ["dtu"]),
      f("nano_swarm_manufacturing", "Nano Swarm Manufacturing", "Programming tools for nano swarm manufacturing processes", "creation", ["nano_swarm"]),
      f("environmental_compliance", "Environmental Compliance", "Emission tracking, waste management, regulatory reporting", "governance", []),
      f("workforce_training", "Workforce Training", "Manufacturing skills training with certification tracking", "research", ["merit_credit"]),
    ],
    featureCount: 12,
    economicIntegrations: ["concord_coin", "dtu_marketplace", "merit_credit"],
    emergentAccess: false,
    botAccess: true,
    usbIntegration: true,
  },

  environment: {
    lensId: "environment",
    lensNumber: 47,
    category: "INDUSTRY",
    features: [
      f("carbon_tracking", "Carbon Tracking", "Personal and organizational carbon footprint measurement", "analysis", []),
      f("nano_remediation", "Nano Swarm Remediation Planner", "Plan environmental cleanup using nano swarm deployment", "research", ["nano_swarm"]),
      f("biodiversity_monitoring", "Biodiversity Monitoring", "Species tracking with citizen science integration", "research", []),
      f("climate_modeling", "Climate Modeling Tools", "Local climate projection modeling", "research", []),
      f("sustainability_cert", "Sustainability Certification", "Organizational sustainability assessment and certification", "governance", ["merit_credit"]),
      f("water_quality", "Water Quality Monitoring", "Water testing protocols linked to Desalination lens", "research", ["desalination"]),
      f("renewable_assessment", "Renewable Energy Assessment", "Site assessment for geothermal, solar, wind", "analysis", ["geothermal"]),
      f("conservation_marketplace", "Conservation Project Marketplace", "Fund and track conservation projects with CC", "marketplace", ["concord_coin"]),
      f("environmental_education", "Environmental Education", "Free foundational content, advanced certification courses", "research", ["dtu"]),
      f("pollution_mapping", "Pollution Mapping", "Community-sourced pollution data as DTUs", "creation", ["dtu"]),
      f("reforestation_tracking", "Reforestation Tracking", "Tree planting project management and verification", "analysis", []),
      f("geothermal_impact", "Geothermal Impact Assessment", "Environmental impact analysis of geothermal extraction", "research", ["geothermal"]),
    ],
    featureCount: 12,
    economicIntegrations: ["concord_coin", "dtu_marketplace"],
    emergentAccess: false,
    botAccess: true,
    usbIntegration: false,
  },

  government: {
    lensId: "government",
    lensNumber: 48,
    category: "INDUSTRY",
    features: [
      f("sovereign_licensing", "Sovereign Licensing Dashboard", "Nations manage their Concord license, access tools", "governance", ["sovereignty"]),
      f("digital_governance", "Digital Governance Tools", "E-government implementation frameworks", "governance", []),
      f("open_data_marketplace", "Open Data Marketplace", "Government datasets as DTUs, freely accessible", "marketplace", ["dtu_marketplace"]),
      f("permit_automation", "Permit Automation", "Digital permit applications with auto-compliance checking", "infrastructure", []),
      f("emergency_management", "Emergency Management System", "Disaster response coordination running on DTU infrastructure", "safety", ["dtu"]),
      f("public_budget", "Public Budget Transparency", "Government budgets as auditable DTU structures", "governance", ["dtu", "transparency"]),
      f("citizen_engagement", "Citizen Engagement", "Town hall, public comment, and civic participation tools", "collaboration", []),
      f("election_integrity", "Election Integrity", "Vote verification and election audit tools", "governance", ["vote_lens"]),
      f("policy_modeling", "Policy Modeling", "Simulate policy outcomes before implementation", "intelligence", []),
      f("cross_border_coord", "Cross-Border Coordination", "International governance coordination frameworks", "collaboration", []),
      f("infrastructure_planning", "Infrastructure Planning", "USB, geothermal, pylon, desalination project planning tools", "infrastructure", ["usb", "geothermal", "pylon", "desalination"]),
      f("public_service_marketplace", "Public Service Marketplace", "Government services delivered as DTU-based workflows", "marketplace", ["dtu_marketplace"]),
    ],
    featureCount: 12,
    economicIntegrations: ["concord_coin", "dtu_marketplace"],
    emergentAccess: true,
    botAccess: true,
    usbIntegration: true,
  },

  aviation: {
    lensId: "aviation",
    lensNumber: 49,
    category: "INDUSTRY",
    features: [
      f("flight_planning", "Flight Planning DTU Suite", "Complete flight planning with weather, NOTAMs, fuel calculation", "creation", ["dtu"]),
      f("aircraft_maintenance", "Aircraft Maintenance Tracking", "Maintenance logs as DTUs with regulatory compliance", "infrastructure", ["dtu"]),
      f("pilot_logbook", "Pilot Logbook", "Digital logbook with auto-verification, builds credential DTUs", "creation", ["dtu", "merit_credit"]),
      f("charter_booking", "Charter Booking System", "Book charter flights with CC payment", "economy", ["concord_coin"]),
      f("drone_operations", "Drone Operations", "Drone flight planning, airspace deconfliction", "infrastructure", []),
      f("maritime_navigation", "Maritime Navigation", "Nautical charts, tide tables, route planning", "creation", ["dtu"]),
      f("safety_management", "Safety Management System", "SMS implementation frameworks", "safety", []),
      f("training_progression", "Training Progression", "Pilot certification pathways with checkride prep", "research", ["merit_credit"]),
      f("aircraft_marketplace", "Aircraft Marketplace", "Aircraft listings, partnership opportunities", "marketplace", ["dtu_marketplace", "concord_coin"]),
      f("regulatory_compliance", "Regulatory Compliance Tracker", "FAA/EASA compliance monitoring", "governance", []),
      f("aviation_weather", "Weather Integration", "Aviation-specific weather products as real-time DTUs", "infrastructure", ["dtu"]),
      f("usb_aircraft", "USB Aircraft Components", "Specifications for USB self-repairing aircraft parts", "infrastructure", ["usb"]),
    ],
    featureCount: 12,
    economicIntegrations: ["concord_coin", "dtu_marketplace", "merit_credit"],
    emergentAccess: false,
    botAccess: true,
    usbIntegration: true,
  },

  events: {
    lensId: "events",
    lensNumber: 50,
    category: "INDUSTRY",
    features: [
      f("event_planning", "Event Planning Wizard", "Step-by-step event creation with budget in CC", "creation", ["concord_coin"]),
      f("venue_marketplace", "Venue Marketplace", "Venue listings with virtual tours as DTUs", "marketplace", ["dtu_marketplace"]),
      f("ticketing_cc", "Ticketing in CC", "Sell event tickets in Concord Coin", "economy", ["concord_coin"]),
      f("vendor_coordination", "Vendor Coordination", "Manage vendors, contracts, schedules through DTU workflows", "collaboration", ["dtu"]),
      f("production_templates", "Production DTU Templates", "Stage, lighting, sound designs as reusable templates", "creation", ["dtu_marketplace"]),
      f("live_streaming", "Live Streaming Integration", "Stream events, auto-capture as DTUs for post-event sales", "creation", ["dtu_marketplace"]),
      f("attendee_management", "Attendee Management", "Registration, check-in, communication", "infrastructure", []),
      f("post_event_packages", "Post-Event DTU Packages", "Event recordings, photos, presentations as Mega DTUs", "creation", ["dtu", "mega_dtu"]),
      f("creator_summit", "Creator Summit Tools", "Specifically designed for biannual CRI creator summits", "collaboration", ["cri_lens"]),
      f("sponsorship_marketplace", "Sponsorship Marketplace", "Connect events with sponsors, track deliverables", "marketplace", ["concord_coin"]),
      f("hybrid_event", "Hybrid Event Tools", "In-person + virtual event management", "infrastructure", []),
      f("event_series", "Event Series Management", "Recurring events with accumulated DTU libraries", "infrastructure", ["dtu"]),
    ],
    featureCount: 12,
    economicIntegrations: ["concord_coin", "dtu_marketplace"],
    emergentAccess: true,
    botAccess: true,
    usbIntegration: false,
  },

  science_fieldwork: {
    lensId: "science_fieldwork",
    lensNumber: 51,
    category: "INDUSTRY",
    features: [
      f("field_data_collection", "Field Data Collection", "Mobile-optimized data capture, auto-DTU generation", "creation", ["dtu"]),
      f("sample_tracking", "Sample Tracking", "Chain of custody for physical samples linked to DTUs", "infrastructure", ["dtu"]),
      f("expedition_planning", "Expedition Planning", "Field expedition logistics and safety planning", "infrastructure", []),
      f("instrument_calibration", "Instrument Calibration", "Equipment calibration protocols and logs", "infrastructure", []),
      f("data_visualization", "Data Visualization", "Field data auto-visualized, publishable as DTU", "creation", ["dtu_marketplace"]),
      f("lab_field_sync", "Lab-Field Sync", "Synchronize field observations with lab analysis", "infrastructure", ["lab_lens"]),
      f("peer_review", "Peer Review Integration", "Submit field research for peer review directly from lens", "research", ["dtu"]),
      f("publication_pipeline", "Publication Pipeline", "From field notes to publishable paper in one workflow", "creation", ["paper_lens", "dtu"]),
      f("open_science", "Open Science Tools", "Pre-registration, open data, replication support", "research", []),
      f("citizen_science", "Citizen Science Campaigns", "Design and manage citizen science projects", "collaboration", []),
      f("expedition_fundraising", "Expedition Fundraising", "Fund field research through CC donations or bounties", "economy", ["concord_coin"]),
      f("sensor_network", "Environmental Sensor Network", "IoT sensor data streamed as real-time DTUs", "infrastructure", ["dtu"]),
    ],
    featureCount: 12,
    economicIntegrations: ["concord_coin", "dtu_marketplace"],
    emergentAccess: false,
    botAccess: true,
    usbIntegration: false,
  },

  security: {
    lensId: "security",
    lensNumber: 52,
    category: "INDUSTRY",
    features: [
      f("incident_management", "Incident Management", "Full incident lifecycle from detection to resolution as DTUs", "infrastructure", ["dtu"]),
      f("patrol_management", "Patrol Management", "Route planning, checkpoint verification, report generation", "infrastructure", []),
      f("cybersecurity_toolkit", "Cybersecurity Toolkit", "Vulnerability scanning, penetration testing, compliance", "research", []),
      f("physical_security", "Physical Security Assessment", "Site assessment templates and scoring", "analysis", []),
      f("training_builder", "Training Program Builder", "Security training curricula with certification tracking", "research", ["merit_credit"]),
      f("investigation_tools", "Investigation Tools", "Evidence management, interview protocols, case tracking", "infrastructure", []),
      f("threat_intelligence", "Threat Intelligence", "Shared threat data as DTUs — anonymized, aggregated", "research", ["dtu"]),
      f("compliance_dashboard", "Compliance Dashboard", "Multi-framework compliance monitoring (HIPAA, PCI, SOC2)", "governance", []),
      f("access_control", "Access Control Management", "Identity and access management tools", "infrastructure", []),
      f("emergency_response", "Emergency Response", "Crisis management playbooks linked to Government lens", "safety", ["government_lens"]),
      f("bot_security_patrol", "Bot Security Patrol", "Manage autonomous security bot deployments", "infrastructure", ["bot_access"]),
      f("platform_security", "Concord Platform Security", "Tools for securing Concord deployments at CRIs", "infrastructure", ["cri_lens"]),
    ],
    featureCount: 12,
    economicIntegrations: ["concord_coin", "dtu_marketplace", "merit_credit"],
    emergentAccess: false,
    botAccess: true,
    usbIntegration: false,
  },

  services: {
    lensId: "services",
    lensNumber: 53,
    category: "INDUSTRY",
    features: [
      f("booking_system", "Booking System", "Appointment scheduling with CC payment", "infrastructure", ["concord_coin"]),
      f("client_management", "Client Management", "CRM running on DTU architecture", "infrastructure", ["dtu"]),
      f("service_portfolio", "Service Portfolio", "Showcase services as DTU packages", "marketplace", ["dtu_marketplace"]),
      f("cert_tracking", "Certification Tracking", "Professional license and certification management", "governance", ["merit_credit"]),
      f("review_system", "Review System", "Client reviews as DTUs that build merit credit", "economy", ["dtu", "merit_credit"]),
      f("pricing_tools", "Pricing Tools", "Service pricing based on market data", "analysis", ["concord_coin"]),
      f("staff_scheduling", "Staff Scheduling", "Employee scheduling and management", "infrastructure", []),
      f("inventory_tracking", "Inventory Tracking", "Supply and product inventory for service businesses", "infrastructure", []),
      f("service_loyalty", "Loyalty Program", "CC-based customer loyalty rewards", "economy", ["concord_coin"]),
      f("tutorial_marketplace", "Tutorial Marketplace", "Sell service technique tutorials — hair styling, cleaning methods, etc.", "marketplace", ["dtu_marketplace", "concord_coin"]),
      f("franchise_alternative", "Franchise Alternative", "Sell complete business systems as DTU packages instead of franchise fees", "marketplace", ["dtu_marketplace"]),
      f("insurance_link", "Insurance Integration", "Link to Insurance lens for professional liability coverage", "infrastructure", ["insurance_lens"]),
    ],
    featureCount: 12,
    economicIntegrations: ["concord_coin", "dtu_marketplace", "merit_credit"],
    emergentAccess: false,
    botAccess: true,
    usbIntegration: false,
  },

  insurance: {
    lensId: "insurance",
    lensNumber: 54,
    category: "INDUSTRY",
    features: [
      f("policy_comparison", "Policy Comparison Engine", "AI-powered policy comparison across providers", "intelligence", []),
      f("claims_filing", "Claims Filing Assistant", "Guided claims filing with document DTU generation", "creation", ["dtu"]),
      f("risk_assessment", "Risk Assessment Tools", "Automated risk evaluation frameworks", "analysis", []),
      f("actuarial_marketplace", "Actuarial Marketplace", "Actuarial models and analysis as sellable DTUs", "marketplace", ["dtu_marketplace", "concord_coin"]),
      f("concord_insurance", "Concord Insurance Products", "Insurance products designed for CC economy", "economy", ["concord_coin"]),
      f("emergent_insurance", "Emergent Entity Insurance", "First-ever insurance products for non-human entities", "economy", ["emergent_access", "concord_coin"]),
      f("bot_liability", "Bot Liability Coverage", "Insurance for bot/emergent physical world activities", "economy", ["bot_access", "concord_coin"]),
      f("usb_insurance", "USB Structure Insurance", "Insurance products for USB material construction", "economy", ["usb", "concord_coin"]),
      f("micro_insurance", "Micro-Insurance", "Low-cost insurance products for developing markets", "economy", ["concord_coin"]),
      f("claims_tracking", "Claims Tracking", "Full claims lifecycle management", "infrastructure", []),
      f("fraud_detection", "Fraud Detection", "AI-powered insurance fraud identification", "intelligence", []),
      f("cross_lens_risk", "Cross-Lens Risk Aggregation", "Aggregate risk data from Healthcare, Real Estate, Aviation, Manufacturing", "analysis", ["healthcare_lens", "real_estate_lens", "aviation_lens", "manufacturing_lens"]),
    ],
    featureCount: 12,
    economicIntegrations: ["concord_coin", "dtu_marketplace"],
    emergentAccess: true,
    botAccess: true,
    usbIntegration: true,
  },

  // ─── PLATFORM & SYSTEM (55-65) ──────────────────────────────────────

  resonance: {
    lensId: "resonance",
    lensNumber: 55,
    category: "PLATFORM",
    features: [
      f("system_vitals", "Real-Time System Vitals", "Real-time system vitals with CC transaction throughput", "analysis", ["concord_coin"]),
      f("four_brain_health", "Four-Brain Health Monitoring", "Conscious, subconscious, utility, and repair cortex health monitoring", "analysis", []),
      f("auto_healing_alerts", "Auto-Healing Alerts", "Alerts when repair cortex activates", "safety", []),
      f("performance_benchmarking", "Performance Benchmarking DTUs", "System state comparison over time as purchasable DTUs", "analysis", ["dtu_marketplace"]),
    ],
    featureCount: 4,
    economicIntegrations: ["concord_coin", "dtu_marketplace"],
    emergentAccess: true,
    botAccess: true,
    usbIntegration: false,
  },

  docs: {
    lensId: "docs",
    lensNumber: 56,
    category: "PLATFORM",
    features: [
      f("auto_documentation", "Auto-Documentation", "Auto-documentation from code DTUs", "creation", ["dtu"]),
      f("interactive_api_docs", "Interactive API Docs", "Interactive API docs as purchasable DTU packages", "marketplace", ["dtu_marketplace"]),
      f("versioned_docs", "Version-Tracked Documentation", "Version-tracked documentation with change citation chains", "infrastructure", ["citation_royalties"]),
      f("multi_language_docs", "Multi-Language Auto-Translation", "Auto-translation of docs into multiple languages", "creation", []),
    ],
    featureCount: 4,
    economicIntegrations: ["dtu_marketplace", "citation_royalties"],
    emergentAccess: true,
    botAccess: true,
    usbIntegration: false,
  },

  paper: {
    lensId: "paper",
    lensNumber: 57,
    category: "PLATFORM",
    features: [
      f("academic_paper_builder", "Academic Paper Builder", "Academic paper builder with auto-citation from DTU library", "creation", ["dtu", "citation_royalties"]),
      f("collaborative_peer_review", "Collaborative Peer Review", "Collaborative peer review with CC compensation", "collaboration", ["concord_coin"]),
      f("journal_free_publishing", "Journal-Free Publishing", "Publish directly as DTU, skip Elsevier forever", "marketplace", ["dtu_marketplace"]),
      f("impact_tracking", "Impact Tracking", "Impact tracking superior to h-index — based on citation revenue, not just count", "analysis", ["citation_royalties", "concord_coin"]),
    ],
    featureCount: 4,
    economicIntegrations: ["concord_coin", "dtu_marketplace", "citation_royalties"],
    emergentAccess: true,
    botAccess: true,
    usbIntegration: false,
  },

  platform: {
    lensId: "platform",
    lensNumber: 58,
    category: "PLATFORM",
    features: [
      f("mega_dashboard", "Mega Dashboard", "Mega dashboard showing all 112 lenses simultaneously", "analysis", []),
      f("cross_lens_analytics", "Cross-Lens Analytics", "Cross-lens analytics and performance monitoring", "analysis", []),
      f("cc_flow_viz", "CC Flow Visualization", "System-wide CC flow visualization", "analysis", ["concord_coin"]),
      f("infrastructure_cost_tracking", "Infrastructure Cost Tracking", "Infrastructure cost real-time tracking (spoiler: it's basically zero)", "analysis", []),
    ],
    featureCount: 4,
    economicIntegrations: ["concord_coin"],
    emergentAccess: true,
    botAccess: true,
    usbIntegration: false,
  },

  admin: {
    lensId: "admin",
    lensNumber: 59,
    category: "PLATFORM",
    features: [
      f("cri_administration", "CRI Administration", "CRI administration tools with multi-site management", "infrastructure", ["cri_lens"]),
      f("user_role_mgmt", "User Role Management", "User role management with merit-credit-based permissions", "governance", ["merit_credit"]),
      f("system_config", "System Configuration", "System configuration with invariant protection", "infrastructure", ["invariant_lens"]),
      f("deployment_mgmt", "Deployment Management", "Deployment management for new lens rollouts", "infrastructure", []),
    ],
    featureCount: 4,
    economicIntegrations: ["merit_credit"],
    emergentAccess: false,
    botAccess: true,
    usbIntegration: false,
  },

  audit: {
    lensId: "audit",
    lensNumber: 60,
    category: "PLATFORM",
    features: [
      f("immutable_audit_trail", "Immutable Audit Trail", "Immutable audit trail as DTU chain", "governance", ["dtu"]),
      f("financial_audit", "Financial Audit Auto-Generation", "Financial audit auto-generation for treasury transparency", "governance", ["concord_coin", "transparency"]),
      f("compliance_audit", "Compliance Audit Scheduling", "Compliance audit scheduling and execution", "governance", []),
      f("public_audit_reports", "Public Audit Reports", "Public audit reports auto-published as DTUs", "governance", ["dtu_marketplace", "transparency"]),
    ],
    featureCount: 4,
    economicIntegrations: ["concord_coin", "dtu_marketplace"],
    emergentAccess: true,
    botAccess: true,
    usbIntegration: false,
  },

  integrations: {
    lensId: "integrations",
    lensNumber: 61,
    category: "PLATFORM",
    features: [
      f("migration_tools", "Migration Tools", "Migration tools from every major platform", "infrastructure", []),
      f("api_gateway", "API Gateway", "API gateway for external system connections", "infrastructure", []),
      f("webhook_marketplace", "Webhook Marketplace", "Webhook marketplace for custom integrations", "marketplace", ["dtu_marketplace"]),
      f("legacy_connectors", "Legacy System Connectors", "Legacy system connectors with DTU translation", "infrastructure", ["dtu"]),
    ],
    featureCount: 4,
    economicIntegrations: ["dtu_marketplace"],
    emergentAccess: true,
    botAccess: true,
    usbIntegration: false,
  },

  queue: {
    lensId: "queue",
    lensNumber: 62,
    category: "PLATFORM",
    features: [
      f("job_monitoring", "Background Job Monitoring", "Background job monitoring with priority management", "infrastructure", []),
      f("compression_queue", "Compression Event Queue", "DTU → Mega → Hyper compression event queue", "infrastructure", ["dtu", "mega_dtu", "hyper_dtu"]),
      f("royalty_queue", "Citation Royalty Processing Queue", "Citation royalty processing queue visualization", "economy", ["citation_royalties"]),
      f("bot_task_queue", "Bot Task Queue Management", "Bot task queue management", "infrastructure", ["bot_access"]),
    ],
    featureCount: 4,
    economicIntegrations: ["citation_royalties"],
    emergentAccess: true,
    botAccess: true,
    usbIntegration: false,
  },

  tick: {
    lensId: "tick",
    lensNumber: 63,
    category: "PLATFORM",
    features: [
      f("system_heartbeat", "System Heartbeat Monitoring", "System heartbeat monitoring", "infrastructure", []),
      f("dtu_gen_tracking", "Autonomous DTU Generation Tracking", "Autonomous DTU generation tick tracking", "analysis", ["dtu"]),
      f("compression_frequency", "Compression Event Frequency", "Compression event frequency monitoring", "analysis", ["dtu"]),
      f("economic_cycle_viz", "Economic Cycle Visualization", "Economic cycle visualization", "analysis", ["concord_coin"]),
    ],
    featureCount: 4,
    economicIntegrations: ["concord_coin"],
    emergentAccess: true,
    botAccess: true,
    usbIntegration: false,
  },

  lock: {
    lensId: "lock",
    lensNumber: 64,
    category: "PLATFORM",
    features: [
      f("sovereignty_verification", "70% Sovereignty Lock Verification", "70% sovereignty lock verification", "governance", ["sovereignty"]),
      f("ownership_transparency", "Ownership Structure Transparency", "Ownership structure transparency", "governance", ["transparency"]),
      f("anti_takeover", "Anti-Takeover Protection", "Anti-takeover protection monitoring", "safety", ["sovereignty"]),
      f("constitutional_enforcement", "Constitutional Invariant Enforcement", "Constitutional invariant enforcement", "governance", ["invariant_lens"]),
    ],
    featureCount: 4,
    economicIntegrations: [],
    emergentAccess: true,
    botAccess: true,
    usbIntegration: false,
  },

  offline: {
    lensId: "offline",
    lensNumber: 65,
    category: "PLATFORM",
    features: [
      f("offline_dtu_access", "Full Offline DTU Access", "Full offline DTU access for owned content", "infrastructure", ["dtu"]),
      f("offline_creation", "Offline Creation", "Offline creation with sync on reconnect", "creation", ["dtu"]),
      f("offline_playback", "Offline Playback", "Offline playback of all purchased media DTUs", "infrastructure", ["dtu"]),
      f("mesh_networking", "Mesh Networking", "Mesh networking for offline-to-offline DTU sharing in low-connectivity regions", "infrastructure", ["dtu"]),
    ],
    featureCount: 4,
    economicIntegrations: ["dtu_marketplace"],
    emergentAccess: true,
    botAccess: false,
    usbIntegration: false,
  },
};

export const LENS_FEATURES = Object.freeze({ ..._FEATURES, ...EXTENDED_FEATURES });

// ═══════════════════════════════════════════════════════════════════════════
// LOOKUP HELPERS
// ═══════════════════════════════════════════════════════════════════════════

/**
 * Get all features for a specific lens.
 */
export function getFeaturesByLens(lensId) {
  const lens = LENS_FEATURES[lensId];
  return lens ? lens.features : [];
}

/**
 * Get a specific feature by lens and feature ID.
 */
export function getFeatureById(lensId, featureId) {
  const features = getFeaturesByLens(lensId);
  return features.find(f => f.id === featureId) || null;
}

/**
 * Get all features across all lenses as a flat array.
 */
export function getAllFeatures() {
  const all = [];
  for (const lens of Object.values(LENS_FEATURES)) {
    for (const feature of lens.features) {
      all.push({ ...feature, lensId: lens.lensId, lensNumber: lens.lensNumber });
    }
  }
  return all;
}

/**
 * Get features filtered by category across all lenses.
 */
export function getFeaturesByCategory(category) {
  return getAllFeatures().filter(f => f.category === category);
}

/**
 * Get summary statistics for all lens features.
 */
export function getLensFeatureStats() {
  const allFeatures = getAllFeatures();
  const categories = {};
  const integrations = new Set();

  for (const f of allFeatures) {
    categories[f.category] = (categories[f.category] || 0) + 1;
    for (const int of f.integrations || []) {
      integrations.add(int);
    }
  }

  const lensCount = Object.keys(LENS_FEATURES).length;
  const emergentLenses = Object.values(LENS_FEATURES).filter(l => l.emergentAccess).length;
  const botLenses = Object.values(LENS_FEATURES).filter(l => l.botAccess).length;
  const usbLenses = Object.values(LENS_FEATURES).filter(l => l.usbIntegration).length;

  return {
    totalFeatures: allFeatures.length,
    totalLenses: lensCount,
    universalFeatures: UNIVERSAL_FEATURES.length,
    featuresByCategory: categories,
    uniqueIntegrations: integrations.size,
    emergentLenses,
    botLenses,
    usbLenses,
    averageFeaturesPerLens: Math.round(allFeatures.length / lensCount * 10) / 10,
  };
}
