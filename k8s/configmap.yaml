apiVersion: v1
kind: ConfigMap
metadata:
  name: concord-config
  namespace: concord
  labels:
    app.kubernetes.io/name: concord
    app.kubernetes.io/part-of: concord-cognitive-engine
data:
  # ── Runtime ────────────────────────────────────────────────────────────
  NODE_ENV: "production"
  PORT: "5050"
  FRONTEND_PORT: "3000"
  DATA_DIR: "/data"
  DB_PATH: "/data/db/concord.db"
  STATE_PATH: "/data/concord_state.json"

  # ── Node.js tuning ────────────────────────────────────────────────────
  NODE_OPTIONS: "--max-old-space-size=3072"
  UV_THREADPOOL_SIZE: "4"

  # ── Networking / CORS ─────────────────────────────────────────────────
  ALLOWED_ORIGINS: "https://concord-os.org"
  FRONTEND_URL: "https://concord-os.org"
  NEXT_PUBLIC_API_URL: "https://concord-os.org"
  NEXT_PUBLIC_SOCKET_URL: "https://concord-os.org"
  NEXT_PUBLIC_SITE_URL: "https://concord-os.org"

  # ── Logging ───────────────────────────────────────────────────────────
  LOG_LEVEL: "info"
  LOG_FORMAT: "json"

  # ── Graceful shutdown ─────────────────────────────────────────────────
  SHUTDOWN_TIMEOUT_MS: "10000"

  # ── WebSocket ─────────────────────────────────────────────────────────
  CONCORD_WS_ENABLED: "true"

  # ── Four-Brain Cognitive Architecture ─────────────────────────────────
  BRAIN_CONSCIOUS_URL: "http://ollama-conscious:11434"
  BRAIN_CONSCIOUS_MODEL: "qwen2.5:14b-q4_K_M"
  BRAIN_SUBCONSCIOUS_URL: "http://ollama-subconscious:11434"
  BRAIN_SUBCONSCIOUS_MODEL: "qwen2.5:7b"
  BRAIN_UTILITY_URL: "http://ollama-utility:11434"
  BRAIN_UTILITY_MODEL: "qwen2.5:3b"
  BRAIN_REPAIR_URL: "http://ollama-repair:11434"
  BRAIN_REPAIR_MODEL: "qwen2.5:1.5b"

  # ── Auth (non-secret) ────────────────────────────────────────────────
  AUTH_MODE: "hybrid"
  AUTH_ENABLED: "true"
  ALLOW_REGISTRATION: "true"
  JWT_EXPIRES_IN: "7d"
  REFRESH_TOKEN_EXPIRES: "30d"
  BCRYPT_ROUNDS: "12"

  # ── LLM model selection (non-secret) ─────────────────────────────────
  OPENAI_MODEL_FAST: "gpt-4o-mini"
  OPENAI_MODEL_SMART: "gpt-4.1"

  # ── Feature flags ────────────────────────────────────────────────────
  EMBEDDINGS_ENABLED: "true"
  FEDERATION_ENABLED: "false"
  ENABLE_TERMINAL_EXEC: "false"
  TELEMETRY_ENABLED: "false"

  # ── S3 backups ───────────────────────────────────────────────────────
  AWS_REGION: "us-east-1"
  BACKUP_STORAGE_CLASS: "STANDARD"
